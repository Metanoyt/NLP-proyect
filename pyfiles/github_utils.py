GitHub Utilities __future__ annotations json os typing Any cast TYPE_CHECKING urllib error HTTPError urllib parse quote urllib request Request urlopen TYPE_CHECKING collections abc Callable gh_fetch_url_and_headers url str headers dict str str &#124; None = None data dict str Any &#124; None = None method str &#124; None = None reader Callable Any Any = lambda x x read - tuple Any Any headers None headers = token = os environ get GITHUB_TOKEN token None url startswith https api github com headers Authorization = f token token data_ = json dumps data encode data None None try urlopen Request url headers=headers data=data_ method=method conn conn headers reader conn except HTTPError err err code == all key err headers key X-RateLimit-Limit X-RateLimit-Used print f Rate limit exceeded Used err headers X-RateLimit-Used Limit err headers X-RateLimit-Limit Remaining err headers X-RateLimit-Remaining Resets err headers x-RateLimit-Reset raise gh_fetch_url url str headers dict str str &#124; None = None data dict str Any &#124; None = None method str &#124; None = None reader Callable Any Any = lambda x x read - Any gh_fetch_url_and_headers url headers=headers data=data reader=json load method=method _gh_fetch_json_any url str params dict str Any &#124; None = None data dict str Any &#124; None = None - Any headers = Accept application vnd github v +json params None len params url += + join f name = quote str val name val params items gh_fetch_url url headers=headers data=data reader=json load gh_fetch_json_dict url str params dict str Any &#124; None = None data dict str Any &#124; None = None - dict str Any cast dict str Any _gh_fetch_json_any url params data gh_fetch_commit org str repo str sha str - dict str Any gh_fetch_json_dict f https api github com repos org repo commits sha