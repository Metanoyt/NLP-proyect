Owner s oncall jit torch torch testing FileCheck torch testing _internal common_utils raise_on_run_directly torch testing _internal jit_utils JitTestCase make_global TestDCE JitTestCase test_setattr_no_aliasdb Net torch nn Module __init__ - None super __init__ x = torch empty forward x = torch rand x = x net = torch jit script Net FileCheck check prim SetAttr run net graph test_setattr_removed torch jit script Thing __init__ - None x = torch zeros make_global Thing Thing torch nn Module forward x = torch rand y = torch rand t = Thing t x = x y unscripted = Thing t = torch jit script unscripted t eval freezing inlines t __init__ after which DCE can occur t = torch jit freeze t FileCheck check_not prim SetAttr run t graph test_mutated_simple fn x torch Tensor y = x sin y_slice = y y_slice add_ x z = y cos z fn_s = torch jit script fn torch _C _jit_pass_dce_graph fn_s graph FileCheck check aten add_ run fn_s graph test_mutated_loop fn x torch Tensor y = x sin y_slice = y y_slice add_ x _ range y_slice = y y = y repeat z = y cos z fn_s = torch jit script fn torch _C _jit_pass_dce_graph fn_s graph FileCheck check aten add_ run fn_s graph __name__ == __main__ raise_on_run_directly test test_jit py