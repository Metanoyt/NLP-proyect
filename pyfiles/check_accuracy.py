argparse os sys textwrap pandas pd Hack have something similar DISABLED_TEST These models flaky flaky_models = yolov detectron _maskrcnn_r_ _c XGLMForCausalLM discovered https github com pytorch pytorch pull moondream discovered https github com pytorch pytorch pull discovered https github com pytorch pytorch issues Its flaky really hard repro so skipping mobilenetv _large_ https github com pytorch pytorch issues vision_maskrcnn get_field csv model_name str field str try csv loc csv name == model_name field item except Exception None check_accuracy actual_csv expected_csv expected_filename failed = improved = rocm expected_filename flaky_models update Background_Matting alexnet demucs densenet detectron _fcos_r_ _fpn doctr_det_predictor doctr_reco_predictor dpn fbnetv _b levit_ llava microbench_unbacked_tolist_sum mnasnet _ mobilenet_v pytorch_CycleGAN_and_pix pix pytorch_stargan resnet resnet resnet resnext _ x d sam sam_fast shufflenet_v _x _ squeezenet _ stable_diffusion_text_encoder stable_diffusion_unet swsl_resnext _ x d torchrec_dlrm vgg BERT_pytorch coat_lite_mini mobilenet_v _large vision_maskrcnn LLM meta-llama Llama- - B google gemma- - b google gemma- - b-it openai whisper-tiny Qwen Qwen - B mistralai Mistral- B-Instruct-v openai gpt-oss- b model actual_csv name accuracy = get_field actual_csv model accuracy expected_accuracy = get_field expected_csv model accuracy accuracy == expected_accuracy status = PASS expected_accuracy == pass XFAIL print f model status continue model flaky_models accuracy == pass model passed marked xfailed status = PASS_BUT_FLAKY model failed marked passe status = FAIL_BUT_FLAKY accuracy = pass status = FAIL failed append model status = IMPROVED improved append model print f model status accuracy= accuracy expected= expected_accuracy msg = failed improved failed msg += textwrap dedent f Error len failed models have accuracy status regressed join failed improved msg += textwrap dedent f Improvement len improved models have accuracy status improved join improved sha = os getenv SHA your CI commit sha msg += textwrap dedent f If change expected you can update ` expected_filename ` reflect new baseline pytorch pytorch root run ` python benchmarks dynamo ci_expected_accuracy update_expected py sha ` then ` git add ` resulting local changes expected CSVs your commit failed improved msg main parser = argparse ArgumentParser parser add_argument -- actual type=str required=True parser add_argument -- expected type=str required=True args = parser parse_args actual = pd read_csv args actual expected = pd read_csv args expected failed msg = check_accuracy actual expected args expected failed print msg sys exit __name__ == __main__ main