mypy allow-untyped-defs sys collections abc Callable Iterable typing Any __all__ = trace_dependencies trace_dependencies callable Callable Any Any inputs Iterable tuple Any - list str Trace execution callable order determine which modules uses Args callable The callable execute trace inputs The input use during tracing The modules used callable when invoked each set inputs union-ed determine all modules used callable purpooses packaging Returns A list names all modules used during callable execution modules_used = set record_used_modules frame event arg If event being profiled Python function call there nothing do event = call This name function called name = frame f_code co_name module = None Try determine name module function Check global namespace frame Check local namespace frame To handle instance method calls check attribute named name object local namespace corresponding name frame f_globals module = frame f_globals name __module__ name frame f_locals module = frame f_locals name __module__ frame f_locals method = getattr frame f_locals name None module = method __module__ method None If module found add set used modules module modules_used add module try Attach record_used_modules profiler function sys setprofile record_used_modules Execute callable all inputs inp inputs callable inp finally Detach profiler function sys setprofile None list modules_used