__future__ annotations json subprocess sys enum Enum typing NamedTuple LINTER_CODE = LINTRUNNER_VERSION LintSeverity str Enum ERROR = error WARNING = warning ADVICE = advice DISABLED = disabled LintMessage NamedTuple path str &#124; None line int &#124; None char int &#124; None code str severity LintSeverity name str original str &#124; None replacement str &#124; None description str &#124; None toVersionString version_tuple tuple int int int - str join str x x version_tuple __name__ == __main__ version_str = subprocess run lintrunner -V stdout=subprocess PIPE stdout decode utf- strip re version_match = re compile r lintrunner \d+ \ \d+ \ \d+ match version_str version_match err_msg = LintMessage path= none line=None char=None code=LINTER_CODE severity=LintSeverity ERROR name= command-failed original=None replacement=None description= Lintrunner installed did you forget run ` make setup-lint make lint ` sys exit curr_version = int version_match int version_match int version_match min_version = curr_version min_version err_msg = LintMessage path= none line=None char=None code=LINTER_CODE severity=LintSeverity ADVICE name= command-failed original=None replacement=None description= join f Lintrunner out date you have v toVersionString curr_version f instead v toVersionString min_version Please run ` pip install lintrunner -U ` update print json dumps err_msg _asdict flush=True