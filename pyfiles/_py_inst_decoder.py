dis typing Any Optional _PyInstDecoder Decodes Python bytecode instructions extract variable names __init__ code_object Any lasti int - None code_object = code_object instructions = list dis get_instructions code_object offset = _find_instruction_index lasti _find_instruction_index lasti int - int Find instruction index corresponding lasti byte offset Find instruction before lasti This should find CALL instruction next one best_idx = i instr enumerate instructions instr offset = lasti best_idx = i break best_idx next - None Advance next instruction offset += opcode - Optional str Get opcode name current instruction offset len instructions instructions offset opname None oparg - int Get argument current instruction offset len instructions instructions offset arg name - Optional str Extract variable name current instruction opname = opcode opname None names = None opname STORE_NAME STORE_GLOBAL names = code_object co_names opname == STORE_FAST names = code_object co_varnames opname == STORE_DEREF names = code_object co_cellvars names names = code_object co_freevars None arg = oparg names = arg len names names arg None