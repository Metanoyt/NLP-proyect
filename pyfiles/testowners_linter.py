usr bin env python Test ownership introduced https github com pytorch pytorch issues This lint verifies every Python test file file matches test_ py _test py test folder has valid ownership information comment header Valid means - The format header follows pattern Owner s list owner labels - Each owner label actually exists PyTorch - Each owner label starts module oncall ACCEPTABLE_OWNER_LABELS __future__ annotations argparse json urllib error enum Enum typing Any NamedTuple urllib request urlopen LINTER_CODE = TESTOWNERS LintSeverity str Enum ERROR = error WARNING = warning ADVICE = advice DISABLED = disabled LintMessage NamedTuple path str &#124; None line int &#124; None char int &#124; None code str severity LintSeverity name str original str &#124; None replacement str &#124; None description str &#124; None get_pytorch_labels - Any url = https ossci-metrics s amazonaws com pytorch_labels json try labels = urlopen url read decode utf- except urllib error URLError This FB-only hack json isn t available we may need use forwarding proxy get out proxy_url = http fwdproxy proxy_handler = urllib request ProxyHandler http proxy_url https proxy_url context = urllib request build_opener proxy_handler labels = context open url read decode utf- json loads labels PYTORCH_LABELS = get_pytorch_labels Team owner labels usually start module oncall following acceptable exceptions ACCEPTABLE_OWNER_LABELS = NNC high priority OWNERS_PREFIX = Owner s GLOB_EXCEPTIONS = test run_test py check_labels labels list str filename str line_number int - list LintMessage lint_messages = label labels label PYTORCH_LABELS lint_messages append LintMessage path=filename line=line_number char=None code=LINTER_CODE severity=LintSeverity ERROR name= invalid-label original=None replacement=None description= f label PyTorch label please choose https github com pytorch pytorch labels label startswith module oncall label ACCEPTABLE_OWNER_LABELS continue lint_messages append LintMessage path=filename line=line_number char=None code=LINTER_CODE severity=LintSeverity ERROR name= invalid-owner original=None replacement=None description= f label acceptable owner please update another label edit ACCEPTABLE_OWNERS_LABELS tools linters adapters testowners_linter py lint_messages check_file filename str - list LintMessage lint_messages = has_ownership_info = False open filename f idx line enumerate f line startswith OWNERS_PREFIX continue has_ownership_info = True labels = json loads line len OWNERS_PREFIX lint_messages extend check_labels labels filename idx + has_ownership_info False lint_messages append LintMessage path=filename line=None char=None code=LINTER_CODE severity=LintSeverity ERROR name= no-owner-info original=None replacement=None description= Missing comment header ownership information lint_messages main - None parser = argparse ArgumentParser description= test ownership linter fromfile_prefix_chars= parser add_argument filenames nargs= + help= paths lint args = parser parse_args lint_messages = filename args filenames lint_messages extend check_file filename lint_message lint_messages print json dumps lint_message _asdict flush=True __name__ == __main__ main