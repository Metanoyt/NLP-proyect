__future__ annotations sys pathlib Path typing TYPE_CHECKING _PARENT = Path __file__ parent absolute _PATH = Path p absolute p sys path TYPE_CHECKING _PARENT _PATH _linter _linter TYPE_CHECKING collections abc Iterator ERROR = Builtin ` set ` deprecated IMPORT_LINE = torch utils _ordered_set OrderedSet\n\n DESCRIPTION = ` set_linter ` lintrunner linter which finds usages Python built-in ` set ` Python code optionally replaces them ` OrderedSet ` EPILOG = ` lintrunner ` operates whole commits If you want remove uses ` set ` existing files part commit call ` set_linter ` directly python tools linter adapters set_linter py -- fix python files --- To omit line Python code ` set_linter ` checking append comment s = set noqa set_linter t = noqa set_linter one two --- Running set_linter fix mode though either ` lintrunner -a ` ` -- fix ` should significantly change behavior working code will still usually needs some manual intervention Replacing ` set ` ` OrderedSet ` will sometimes introduce new typechecking errors because ` OrderedSet ` imperfectly generic Find common type its elements worst case ` typing Any ` always works use ` OrderedSet YourCommonTypeHere ` The fix mode doesn t recognize generator expressions so replaces s = i i range s = OrderedSet i i range You can should delete square brackets every such case There common pattern set usage where set created then only used testing inclusion For small collections up around elements tuple more time-efficient than OrderedSet also has less visual clutter see https github com rec test blob master python time_access py SetLinter _linter FileLinter linter_name = set_linter description = DESCRIPTION epilog = EPILOG report_column_numbers = True _lint pf _linter PythonFile - Iterator _linter LintResult pf sets pf braced_sets ins = pf insert_import_line None yield _linter LintResult Add OrderedSet ins IMPORT_LINE b pf braced_sets yield _linter LintResult ERROR b start OrderedSet yield _linter LintResult ERROR b - start s pf sets yield _linter LintResult ERROR s start OrderedSet __name__ == __main__ SetLinter run