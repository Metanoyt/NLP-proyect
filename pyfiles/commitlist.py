argparse csv dataclasses os pprint re collections defaultdict pathlib Path typing List common common features_to_dict frontend_categories get_commit_data_cache run topics Example Usages Create new commitlist consumption categorize py Said commitlist contains commits between v f bc f python commitlist py -- create-new tags v f bc f Update existing commitlist commit bfcb b c python commitlist py -- update-to bfcb b c Increase allowed size CSV field mil bytes long files changed csv field_size_limit dataclasses dataclass frozen=False Commit commit_hash str category str topic str title str files_changed str pr_link str author str This list so easier put spreadsheet accepter_ str accepter_ str accepter_ str merge_into str = None __repr__ f Commit commit_hash category topic title commit_fields = tuple f name f dataclasses fields Commit CommitList NB Private ctor Use ` from_existing ` ` create_new ` __init__ path str commits List Commit path = path commits = commits staticmethod from_existing path commits = CommitList read_from_disk path CommitList path commits staticmethod create_new path base_version new_version os path exists path raise ValueError Attempted create new commitlist one exists already commits = CommitList get_commits_between base_version new_version CommitList path commits staticmethod read_from_disk path - List Commit open path csvfile reader = csv DictReader csvfile rows = row reader row get new_title = row title = row new_title filtered_rows = k row get k k commit_fields rows append Commit filtered_rows rows write_result write_to_disk_static path commits staticmethod write_to_disk_static path commit_list os makedirs Path path parent exist_ok=True open path w csvfile writer = csv writer csvfile writer writerow commit_fields commit commit_list writer writerow dataclasses astuple commit staticmethod keywordInFile file keywords key keywords key file True False staticmethod gen_commit commit_hash feature_item = get_commit_data_cache get commit_hash features = features_to_dict feature_item category topic = CommitList categorize features = features accepters + features pr_number None pr_link = f https github com pytorch pytorch pull features pr_number pr_link = None files_changed_str = join features files_changed Commit commit_hash category topic features title files_changed_str pr_link features author staticmethod category_remapper category str - str category frontend_categories category = category + _frontend category category == Meta API category = composability category category common quantization categories category = common quantization name category category common distributed categories category = common distributed name category category staticmethod bracket_category_matcher title str Categorize commit based presence bracketed category title Args title str title seaarch Returns optional str pairs = dynamo dynamo torchdynamo dynamo torchinductor inductor inductor inductor codemod skip profiler profiler functorch functorch autograd autograd_frontend quantization quantization nn nn_frontend complex complex_frontend mps mps optimizer optimizer_frontend xla xla title_lower = title lower bracket category pairs bracket title_lower category None staticmethod categorize features title = features title labels = features labels category = Uncategorized topic = Untopiced Revert commits merged directly master no associated PR number features pr_number None title startswith Revert skip topic We ask contributors label their PR s appropriately when they re first landed Check labels there first already_categorized = already_topiced = False label labels label startswith release notes category = label split release notes category = CommitList category_remapper category already_categorized = True label startswith topic topic = label split topic already_topiced = True already_categorized already_topiced category topic update check each file starts caffe caffe title caffe topic Reverted labels skip topic module deprecation labels topic = deprecation found_bracket_category = CommitList bracket_category_matcher title found_bracket_category found_bracket_category topic files_changed = features files_changed file files_changed file_lowercase = file lower CommitList keywordInFile file docker circleci github jenkins ci azure_pipelines category = releng break datapipe s torch utils data test_ dataloader datapipe CommitList keywordInFile file torch utils data test_dataloader test_datapipe category = dataloader_frontend break CommitList keywordInFile file torch csrc api test cpp api category = cpp_frontend break CommitList keywordInFile file distributed c d category = distributed break vulkan file_lowercase category = vulkan break Foreach file_lowercase category = foreach_frontend break onnx file_lowercase category = onnx break CommitList keywordInFile file torch fx test_fx category = fx break CommitList keywordInFile file torch ao test ao category = common quantization name break torch quantization test quantization aten src ATen native quantized torch nn quantized quantizable CommitList keywordInFile file torch quantization test quantization aten src ATen native quantized torch nn quantiz category = common quantization name break CommitList keywordInFile file torch package test package category = package break CommitList keywordInFile file torch csrc jit mobile aten src ATen native metal test mobile torch backends _nnapi test test_nnapi py category = mobile break CommitList keywordInFile file aten src ATen native LinearAlgebra cpp test test_linalg py torch linalg category = linalg_frontend break CommitList keywordInFile file torch sparse aten src ATen native sparse torch _masked __init__ py category = sparse_frontend break CommitList keywordInFile file tools autograd category = autograd_frontend break CommitList keywordInFile file test test_nn py test test_module py torch nn modules torch nn functional py category = nn_frontend break CommitList keywordInFile file torch csrc jit torch jit category = jit break CommitList keywordInFile file torch _meta_registrations py torch _decomp torch _prims torch _refs category = composability break CommitList keywordInFile file torch _dynamo category = dynamo break CommitList keywordInFile file torch _inductor category = inductor break Below some extra quick checks aren t necessarily file-path related I found catch decent number extra commits len files_changed all f_name endswith cu cuh f_name files_changed category = cuda PyTorch Edge title category = mobile len files_changed == torch testing _internal common_methods_invocations py files_changed when only file changed s almost always OpInfo change category = python_frontend len files_changed == torch _torch_docs py files_changed individual torch_docs changes usually python ops category = python_frontend If we couldn t find category topic user facing we can skip these category == Uncategorized topic == user facing category = skip category topic staticmethod get_commits_between base_version new_version cmd = f git merge-base base_version new_version rc merge_base _ = run cmd assert rc == Returns list something like b e ec Allow higher-precision step type Vec arange cmd = f git log -- reverse -- oneline merge_base new_version rc commits _ = run cmd assert rc == log_lines = commits split \n hashes titles = zip log_line split log_line log_lines CommitList gen_commit commit_hash commit_hash hashes filter category=None topic=None commits = commits category None commits = commit commit commits commit category == category topic None commits = commit commit commits commit topic == topic commits update_to new_version last_hash = commits - commit_hash new_commits = CommitList get_commits_between last_hash new_version commits += new_commits stat counts = defaultdict lambda defaultdict int commit commits counts commit category commit topic += counts create_new path base_version new_version commits = CommitList create_new path base_version new_version commits write_result update_existing path new_version commits = CommitList from_existing path commits update_to new_version commits write_result rerun_with_new_filters path current_commits = CommitList from_existing path i commit enumerate current_commits commits current_category = commit category current_category == Uncategorized current_category common categories feature_item = get_commit_data_cache get commit commit_hash features = features_to_dict feature_item category topic = CommitList categorize features current_commits commits i = dataclasses replace commit category=category topic=topic current_commits write_result get_hash_or_pr_url commit Commit cdc = get_commit_data_cache pr_link = commit pr_link pr_link None commit commit_hash regex = r https github com pytorch pytorch pull - + matches = re findall regex pr_link len matches == commit commit_hash f matches pr_link to_markdown commit_list CommitList category cleanup_title commit match = re match r \ #\d+\ commit title match None commit title match group merge_mapping = defaultdict list commit commit_list commits commit merge_into merge_mapping commit merge_into append commit cdc = get_commit_data_cache lines = f \n## category \n topic topics lines append f ### topic \n commits = commit_list filter category=category topic=topic _ topic commits extend commit_list filter category=category topic=topic replace _ topic commits extend commit_list filter category=category topic=topic replace _ commit commits commit merge_into continue all_related_commits = merge_mapping commit commit_hash + commit commit_list_md = join get_hash_or_pr_url c c all_related_commits result = f - cleanup_title commit commit_list_md \n lines append result lines get_markdown_header category header = f Release Notes worksheet category The main goal process rephrase all commit messages below make them clear easy read end user You should follow following instructions do so Please clean up format commit titles readable general PyTorch user Make sure you re following guidance here https docs google com document d OmgGBr w gl VO GGGdwrIaUNr DFhQbY_NEk mQ edit Your resulting notes must consistent easy read Please sort commits into following categories you should rename categories I tried pre-sort these ease your work feel free move commits around current categorization good Anything public facing needs removed If anything miscategorized belongs another domain move ` miscategorized md ` Please scan through ` miscategorized md ` handle any commits belong within your domain according these instructions We place lot emphasis “ BC-breaking ” “ deprecation ” sections Those should where most effort goes The “ improvements ” “ bug fixes ” Python API should nice well Once you finished move very file ` todo ` ` done ` submit pull request The categories below follows BC breaking All commits BC-breaking These most important commits If any pre-sorted commit actually BC-breaking do move section Each commit should contain paragraph explaining rational behind change well example how update user code BC-Guidelines https docs google com document d OmgGBr w gl VO GGGdwrIaUNr DFhQbY_NEk mQ edit#heading=h htwgvvec m Deprecations All commits introducing deprecation Each commit should include small example explaining what should done update user code new_features All commits introducing new feature new functions new submodule new supported platform etc improvements All commits providing improvements existing feature should here new backend function new argument better numerical stability bug fixes All commits fix bugs behaviors do match documentation performance All commits added mainly performance we separate improvements above make easier users look documentation All commits add update documentation Developers All commits end-user facing still impact people compile source develop into pytorch extend pytorch etc user facing All commits public end-user facing hence should dropped release notes header main parser = argparse ArgumentParser description= Tool create commit list group = parser add_mutually_exclusive_group required=True group add_argument -- create-new -- create_new nargs= group add_argument -- update-to -- update_to I found flag useful when experimenting adding new auto-categorizing filters After running commitlist py first time you add any new filters file re-running rerun_with_new_filters will update existing commitlist csv file only affect rows previously marked Uncategorized group add_argument -- rerun-with-new-filters -- rerun_with_new_filters action= store_true group add_argument -- stat action= store_true group add_argument -- export-markdown -- export_markdown action= store_true group add_argument -- export-csv-categories -- export_csv_categories action= store_true parser add_argument -- path default= results commitlist csv args = parser parse_args args create_new create_new args path args create_new args create_new print Finished creating new commit list Results have been saved results commitlist csv args update_to update_existing args path args update_to args rerun_with_new_filters rerun_with_new_filters args path args stat commits = CommitList from_existing args path stats = commits stat pprint pprint stats args export_csv_categories commits = CommitList from_existing args path categories = list commits stat keys category categories print f Exporting category filename = f results export result_ category csv CommitList write_to_disk_static filename commits filter category=category args export_markdown commits = CommitList from_existing args path categories = list commits stat keys category categories print f Exporting category lines = get_markdown_header category lines += to_markdown commits category filename = f results export result_ category md os makedirs os path dirname filename exist_ok=True open filename w f f writelines lines raise AssertionError __name__ == __main__ main