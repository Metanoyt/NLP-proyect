usr bin env python pathlib Path try VS Code settings allow comments trailing commas which valid JSON json json type ignore HAS_JSON = True except ImportError json type ignore no-redef HAS_JSON = False ROOT_FOLDER = Path __file__ absolute parent parent VSCODE_FOLDER = ROOT_FOLDER vscode RECOMMENDED_SETTINGS = VSCODE_FOLDER settings_recommended json SETTINGS = VSCODE_FOLDER settings json settings can nested so we need recursively update settings deep_update d dict u dict - dict type ignore type-arg k v u items isinstance v dict d k = deep_update d get k v isinstance v list d k = d get k + v d k = v d main - None recommended_settings = json loads RECOMMENDED_SETTINGS read_text try current_settings_text = SETTINGS read_text except FileNotFoundError current_settings_text = try current_settings = json loads current_settings_text except ValueError ex json JSONDecodeError subclass ValueError HAS_JSON raise SystemExit Failed parse vscode settings json ex raise SystemExit Failed parse vscode settings json Maybe contains comments trailing commas Try ` pip install json ` install extended JSON parser ex settings = deep_update current_settings recommended_settings SETTINGS write_text json dumps settings indent= + \n add trailing newline encoding= utf- __name__ == __main__ main