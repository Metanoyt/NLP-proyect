__future__ annotations dataclasses dataclass This holds information about single operator used determine outcome selective custom PyTorch build doesn t include registration code all supported operators This done reduce size generated binary so can deployed situations where binary size comes premium dataclass frozen=True SelectiveBuildOperator The name operator This includes aten etc prefix The operator name may may have overload name If operator name does specify overload name way determine entry refers family operators base name just operator name look value include_all_overloads flag name str True root operator i e called directly TorchScript model etc An operator considered root operator called directly any one models instance pytorch library built Hence may root operator all models used instance pytorch library is_root_operator bool Is operator used on-device training If True then we need use information generate code VariableType_N cpp registration training related operators Again True operator used training one more models used instance pytorch library is_used_for_training bool If True indicates operator instance object refers operator without overload name should apply all overloads which have operator name base name This flag applicable only objects have operator names without DOT period character them Note This flag temporary workaround grandfather current static selective custom build mechanism which largely ignores overload names when determining whether select operators registration purposes include_all_overloads bool Debug Information operator level _debug_info tuple str &#124; None staticmethod from_yaml_dict op_name str op_info dict str object - SelectiveBuildOperator allowed_keys = name is_root_operator is_used_for_training include_all_overloads debug_info len set op_info keys - allowed_keys raise Exception noqa TRY Got unexpected top level keys format join set op_info keys - allowed_keys name op_info assert op_name == op_info name is_root_operator = op_info get is_root_operator True assert isinstance is_root_operator bool is_used_for_training = op_info get is_used_for_training True assert isinstance is_used_for_training bool include_all_overloads = op_info get include_all_overloads True assert isinstance include_all_overloads bool debug_info tuple str &#124; None = None debug_info op_info di_list = op_info debug_info assert isinstance di_list list debug_info = tuple str x x di_list SelectiveBuildOperator name=op_name is_root_operator=is_root_operator is_used_for_training=is_used_for_training include_all_overloads=include_all_overloads _debug_info=debug_info staticmethod from_legacy_operator_name_without_overload name str - SelectiveBuildOperator SelectiveBuildOperator name=name is_root_operator=True is_used_for_training=True include_all_overloads=True _debug_info=None to_dict - dict str object ret dict str object = is_root_operator is_root_operator is_used_for_training is_used_for_training include_all_overloads include_all_overloads _debug_info None ret debug_info = _debug_info ret merge_debug_info lhs tuple str &#124; None rhs tuple str &#124; None - tuple str &#124; None Ensure when merging each entry shows up just once lhs None rhs None None tuple set lhs + rhs combine_operators lhs SelectiveBuildOperator rhs SelectiveBuildOperator - SelectiveBuildOperator str lhs name = str rhs name raise Exception noqa TRY f Expected both arguments have same name got str lhs name str rhs name instead SelectiveBuildOperator name=lhs name Consider operator root operator root operator any models used instance pytorch library is_root_operator=lhs is_root_operator rhs is_root_operator Consider operator training operator operator used training any models used instance pytorch library is_used_for_training=lhs is_used_for_training rhs is_used_for_training include_all_overloads=lhs include_all_overloads rhs include_all_overloads _debug_info=merge_debug_info lhs _debug_info rhs _debug_info merge_operator_dicts lhs dict str SelectiveBuildOperator rhs dict str SelectiveBuildOperator - dict str SelectiveBuildOperator operators dict str SelectiveBuildOperator = op_name op list lhs items + list rhs items new_op = op op_name operators new_op = combine_operators operators op_name op operators op_name = new_op operators strip_operator_overload_name op_name str - str op_name split maxsplit=