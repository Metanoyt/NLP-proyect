usr bin env python os pathlib Path torch jit _decompositions decomposition_table torchgen code_template CodeTemplate DECOMP_HEADER = r generated This auto-generated file Please do modify hand To re-generate please run cd ~ pytorch python torchgen decompositions gen_jit_decompositions py #include torch csrc jit jit_log h #include torch csrc jit passes inliner h #include torch csrc jit runtime operator h #include torch csrc jit runtime decomposition_registry_util h namespace torch namespace jit const std string decomp_funcs = R DECOMP_CENTER = r const std string GetSerializedDecompositions decomp_funcs const OperatorMap std string GetDecompositionMapping clang-format off static const OperatorMap std string decomposition_mapping DECOMP_END = r clang-format decomposition_mapping namespace jit namespace torch DECOMPOSITION_UTIL_FILE_NAME = decomposition_registry_util cpp gen_serialized_decompisitions - str \n join scripted_func code scripted_func decomposition_table values type ignore misc gen_decomposition_mappings - str decomposition_mappings = schema scripted_func decomposition_table items decomposition_mappings append + schema + + scripted_func name + type ignore operator \n join decomposition_mappings write_decomposition_util_file path str - None decomposition_str = gen_serialized_decompisitions decomposition_mappings = gen_decomposition_mappings file_components = DECOMP_HEADER decomposition_str DECOMP_CENTER decomposition_mappings DECOMP_END print writing file path + + DECOMPOSITION_UTIL_FILE_NAME open os path join path DECOMPOSITION_UTIL_FILE_NAME wb out_file final_output = join file_components out_file write final_output encode utf- main - None pytorch_dir = Path __file__ resolve parents upgrader_path = pytorch_dir torch csrc jit runtime write_decomposition_util_file str upgrader_path __name__ == __main__ main