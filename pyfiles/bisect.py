mypy ignore-errors subprocess test cmd limit print f Testing PYTORCH_JIT_OPT_LIMIT=tensorexpr_fuser= limit cmd p = subprocess run f PYTORCH_JIT_OPT_LIMIT=tensorexpr_fuser= limit cmd shell=True capture_output=True encoding= utf- check=False print p stdout f = INTERNAL ASSERT FAILED f p stdout f p stderr print skip - p returncode == print good print bad bisect cmd last_good = first_bad = skips = set Test there any unskipped commits last_good first_bad keep_going limit range last_good + first_bad limit skips True False while keep_going test_limit = test_mid = last_good + first_bad val = - Scan forward mid towards bad while test_limit = first_bad val == - val = test cmd test_limit val == - skips add test_limit test_limit = test_limit + If everything mid bad skipped scan back towards good val == - test_limit = test_mid - while test_limit = last_good val == - val = test cmd test_limit val == - skips add test_limit test_limit = test_limit - val == first_bad = test_limit val == last_good = test_limit print f last good last_good first bad first_bad __name__ == __main__ click click command click option -- cmd required=True cli cmd bisect cmd cli