usr bin env python Flight Recorder Trace Analyzer This script primarily merges data individual flight recorder buffers individual ranks PyTorch Distributed program into flattened database format can used further analysis However part merging process necessary perform some analysis order match operators one rank corresponding operators other ranks register them one collective entry During process significant amount useful information can already extracted such where first mismatch occurs cases desync when all ranks issue compatible collective particular process group Not Yet Implemented - TODO- tracebacks aren t implemented Known Issues - Flight Recorder buffer sequence_id information sufficient match collectives coalesced collectives unless we have trace data beginning program To enable confident analysis trace buffers do start zero simplify script s matching logic we need add more information recorder - Currently script omits checking status collectives We can look first non completed collective easily enough report Usage python fr_trace py dump dir containing trace files -o output file - Omitting optional output file will still yield analysis information stdout - The output file pickle flat DB which may change format future - This script versioned so we can ensure our future changes flight recorder backwards compatible pickle collections abc Sequence typing Optional tools flight_recorder components builder build_db transform_ft tools flight_recorder components config_manager JobConfig tools flight_recorder components loader read_dir tools flight_recorder components types types main args Optional Sequence str = None - None config = JobConfig pyrefly ignore bad-assignment args = config parse_args args pyrefly ignore missing-attribute assert args trace_dir Trace directory trace_dir required pyrefly ignore bad-argument-type details version = read_dir args args transform_ft assert args group_world_size World size required transform_ft details = transform_ft details args group_world_size pyrefly ignore bad-argument-type db = build_db details args version pyrefly ignore missing-attribute args output pyrefly ignore no-matching-overload open args output wb f pickle dump types db f __name__ == __main__ main