argparse os sys textwrap pandas pd Hack have something similar DISABLED_TEST These models flaky flaky_models = yolov detectron _maskrcnn_r_ _c XGLMForCausalLM discovered https github com pytorch pytorch pull detectron _fcos_r_ _fpn get_field csv model_name str field str try csv loc csv name == model_name field item except Exception None check_graph_breaks actual_csv expected_csv expected_filename failed = improved = rocm expected_filename flaky_models update alexnet demucs densenet detectron _fcos_r_ _fpn doctr_det_predictor doctr_reco_predictor levit_ llava microbench_unbacked_tolist_sum resnet resnet sam sam_fast stable_diffusion_text_encoder stable_diffusion_unet timm_efficientdet torchrec_dlrm vgg LLM meta-llama Llama- - B google gemma- - b google gemma- - b-it openai whisper-tiny Qwen Qwen - B mistralai Mistral- B-Instruct-v openai gpt-oss- b model actual_csv name graph_breaks = get_field actual_csv model graph_breaks expected_graph_breaks = get_field expected_csv model graph_breaks flaky = model flaky_models expected_graph_breaks None status = MISSING improved append model graph_breaks == expected_graph_breaks status = PASS_BUT_FLAKY flaky PASS print f model status continue graph_breaks expected_graph_breaks flaky status = FAIL_BUT_FLAKY status = FAIL failed append model graph_breaks expected_graph_breaks flaky status = IMPROVED_BUT_FLAKY status = IMPROVED improved append model print f model status graph_breaks= graph_breaks expected= expected_graph_breaks msg = failed improved failed msg += textwrap dedent f Error len failed models have new dynamo graph breaks join failed improved msg += textwrap dedent f Improvement len improved models have fixed dynamo graph breaks join improved sha = os getenv SHA your CI commit sha msg += textwrap dedent f If change expected you can update ` expected_filename ` reflect new baseline pytorch pytorch root run ` python benchmarks dynamo ci_expected_accuracy update_expected py sha ` then ` git add ` resulting local changes expected CSVs your commit failed improved msg main parser = argparse ArgumentParser parser add_argument -- actual type=str required=True parser add_argument -- expected type=str required=True args = parser parse_args actual = pd read_csv args actual expected = pd read_csv args expected failed msg = check_graph_breaks actual expected args expected failed print msg sys exit __name__ == __main__ main