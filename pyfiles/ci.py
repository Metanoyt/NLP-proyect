Collect instruction counts continuous integration mypy ignore-errors argparse hashlib json time typing Union core expand materialize definitions standard BENCHMARKS execution runner Runner execution work WorkOrder REPEATS = TIMEOUT = Seconds RETRIES = VERSION = MD = d e abf ad bb c main argv list str - None parser = argparse ArgumentParser parser add_argument -- destination type=str default=None parser add_argument -- subset action= store_true args = parser parse_args argv t = int time time version = VERSION benchmarks = materialize BENCHMARKS Useful local development since e e time full suite O hour in_debug_mode = args subset args destination None args subset version = - benchmarks = benchmarks work_orders = tuple WorkOrder label autolabels timer_args timeout=TIMEOUT retries=RETRIES label autolabels timer_args benchmarks REPEATS keys = tuple str work_order None work_order work_orders keys md = hashlib md usedforsecurity=False key keys md update key encode utf- Warn early since collection takes long time md hexdigest = MD args subset version = - print f WARNING Expected MD got md hexdigest instead results = Runner work_orders cadence= run TODO Annotate TypedDict when minimum supported version grouped_results dict str dict str list Union float int = key times counts key keys work_order r results items key = str work_order grouped_results key times extend r wall_times grouped_results key counts extend r instructions final_results = version version md md hexdigest start_time t end_time int time time values grouped_results args destination open args destination w f json dump final_results f in_debug_mode result_str = json dumps final_results print f result_str result_str - \n pdb pdb set_trace