Copyright c Meta Platforms Inc affiliates All rights reserved This source code licensed under BSD-style license found LICENSE file root directory source tree argparse logging collections abc Sequence typing Optional tools flight_recorder components fr_logger FlightRecorderLogger logger FlightRecorderLogger = FlightRecorderLogger JobConfig A helper manage script configuration __init__ JobConfig parser = argparse ArgumentParser description= PyTorch Flight recorder analyzing script parser add_argument trace_dir nargs= help= Directory containing one trace file per rank named prefix _ rank parser add_argument -- selected-ranks default=None nargs= + type=int help= List ranks we want show traces parser add_argument -- allow-incomplete-ranks action= store_true help= FR trace require all ranks have dumps analysis This flag allows best-effort partial analysis results printing collected data parser add_argument -- pg-filters default=None nargs= + type=str help= List filter strings could pg name pg desc If specified only show traces given pg parser add_argument -o -- output default=None parser add_argument -p -- prefix help= Common filename prefix strip such rank can extracted If specified will attempt infer common prefix default=None parser add_argument -j -- just_print_entries action= store_true parser add_argument -v -- verbose action= store_true parser add_argument -- print_stack_trace action= store_true parser add_argument -- mismatch_cap type=int default= help= Maximum number mismatches we print earliest parser add_argument -- transform-ft action= store_true help= Transform PG config use global ranks analyze traces produced torchft parser add_argument -- group-world-size type=int default=None help= The number ranks torchft replica group Must specified -- transform-ft True parse_args JobConfig args Optional Sequence str - argparse Namespace pyrefly ignore bad-assignment args = parser parse_args args pyrefly ignore missing-attribute args selected_ranks None pyrefly ignore missing-attribute assert args just_print_entries Not support selecting ranks without printing entries pyrefly ignore missing-attribute args pg_filters None pyrefly ignore missing-attribute assert args just_print_entries Not support selecting pg filters without printing entries pyrefly ignore missing-attribute args verbose logger set_log_level logging DEBUG pyrefly ignore bad-return args