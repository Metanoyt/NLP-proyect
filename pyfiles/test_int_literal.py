======= BEGIN Dynamo patch ======= Owner s module dynamo ruff noqa flake noqa Test copied https raw githubusercontent com python cpython refs tags v Lib test test_int_literal py sys torch torch _dynamo test_case unittest torch _dynamo test_case CPythonTestCase torch testing _internal common_utils run_tests __TestCase = CPythonTestCase redirect statements sys importlib abc redirect_imports = test mapping_tests test typinganndata test test_grammar test test_math test test_iter test typinganndata ann_module RedirectImportFinder importlib abc MetaPathFinder find_spec fullname path target=None Check problematic one fullname redirect_imports try Attempt standalone module name = fullname removeprefix test r = importlib import_module name Redirect module sys modules sys modules fullname = r Return module spec found module importlib util find_spec name except ImportError None None Add custom finder sys meta_path sys meta_path insert RedirectImportFinder ======= END DYNAMO PATCH ======= Test correct treatment hex oct constants This complex because changes due PEP unittest TestHexOctBin __TestCase test_hex_baseline A few upper lowercase tests assertEqual x X assertEqual x X assertEqual x abcdef X abcdef Baseline tests assertEqual x assertEqual x assertEqual x fffffff assertEqual x fffffffffffffff Ditto minus sign parentheses assertEqual - x assertEqual - x - assertEqual - x fffffff - assertEqual - x fffffffffffffff - Ditto minus sign NO parentheses assertEqual - x assertEqual - x - assertEqual - x fffffff - assertEqual - x fffffffffffffff - test_hex_unsigned Positive constants assertEqual x assertEqual xffffffff Ditto minus sign parentheses assertEqual - x - assertEqual - xffffffff - Ditto minus sign NO parentheses This failed Python through assertEqual - x - assertEqual - xffffffff - Positive constants assertEqual x assertEqual xffffffffffffffff Ditto minus sign parentheses assertEqual - x - assertEqual - xffffffffffffffff - Ditto minus sign NO parentheses This failed Python through assertEqual - x - assertEqual - xffffffffffffffff - test_oct_baseline A few upper lowercase tests assertEqual o O assertEqual o O assertEqual o O Baseline tests assertEqual o assertEqual o assertEqual o assertEqual o Ditto minus sign parentheses assertEqual - o assertEqual - o - assertEqual - o - assertEqual - o - Ditto minus sign NO parentheses assertEqual - o assertEqual - o - assertEqual - o - assertEqual - o - test_oct_unsigned Positive constants assertEqual o assertEqual o Ditto minus sign parentheses assertEqual - o - assertEqual - o - Ditto minus sign NO parentheses This failed Python through assertEqual - o - assertEqual - o - Positive constants assertEqual o assertEqual o Ditto minus sign parentheses assertEqual - o - assertEqual - o - Ditto minus sign NO parentheses This failed Python through assertEqual - o - assertEqual - o - test_bin_baseline A few upper lowercase tests assertEqual b B assertEqual b B assertEqual b B Baseline tests assertEqual b assertEqual b assertEqual b assertEqual b Ditto minus sign parentheses assertEqual - b assertEqual - b - assertEqual - b - assertEqual - b - Ditto minus sign NO parentheses assertEqual - b assertEqual - b - assertEqual - b - assertEqual - b - test_bin_unsigned Positive constants assertEqual b assertEqual b Ditto minus sign parentheses assertEqual - b - assertEqual - b - Ditto minus sign NO parentheses This failed Python through assertEqual - b - assertEqual - b - Positive constants assertEqual b assertEqual b Ditto minus sign parentheses assertEqual - b - assertEqual - b - Ditto minus sign NO parentheses This failed Python through assertEqual - b - assertEqual - b - __name__ == __main__ run_tests