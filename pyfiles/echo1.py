usr bin env python Copyright c Facebook Inc its affiliates All rights reserved This source code licensed under BSD-style license found LICENSE file root directory source tree argparse os sys __name__ == __main__ parser = argparse ArgumentParser description= test binary exits exitcode parser add_argument -- exitcode type=int default= parser add_argument msg type=str args = parser parse_args rank = int os environ RANK exitcode = args exitcode exitcode = print f exit exitcode rank file=sys stderr sys exit exitcode msg args msg split print f msg stdout rank print f msg stderr rank file=sys stderr