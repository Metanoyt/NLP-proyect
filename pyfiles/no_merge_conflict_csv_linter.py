__future__ annotations argparse concurrent futures json logging os sys enum Enum typing NamedTuple LintSeverity str Enum ERROR = error WARNING = warning ADVICE = advice DISABLED = disabled LintMessage NamedTuple path str &#124; None line int &#124; None char int &#124; None code str severity LintSeverity name str original str &#124; None replacement str &#124; None description str &#124; None check_file filename str - list LintMessage open filename rb f original = f read decode utf- replacement = open filename f lines = f readlines line lines len line strip replacement += line replacement += \n replacement = replacement - replacement == original LintMessage path=filename line=None char=None code= MERGE_CONFLICTLESS_CSV severity=LintSeverity WARNING name= format original=original replacement=replacement description= Run ` lintrunner -a ` apply patch main - None parser = argparse ArgumentParser description= Format csv files have lines space between each line prevent merge conflicts fromfile_prefix_chars= parser add_argument -- verbose action= store_true help= verbose logging parser add_argument filenames nargs= + help= paths lint args = parser parse_args logging basicConfig format= processName s levelname s message s level=logging NOTSET args verbose logging DEBUG len args filenames logging INFO stream=sys stderr concurrent futures ProcessPoolExecutor max_workers=os cpu_count executor futures = executor submit check_file x x x args filenames future concurrent futures as_completed futures try lint_message future result print json dumps lint_message _asdict flush=True except Exception logging critical Failed s futures future raise __name__ == __main__ main