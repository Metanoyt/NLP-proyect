usr bin env python Check whether PR has required labels sys typing Any github_utils gh_delete_comment gh_post_pr_comment gitutils get_git_remote_name get_git_repo_dir GitRepo label_utils has_required_labels is_label_err_comment LABEL_ERR_MSG trymerge GitHubPR delete_all_label_err_comments pr GitHubPR - None comment pr get_comments is_label_err_comment comment gh_delete_comment pr org pr project comment database_id add_label_err_comment pr GitHubPR - None Only make comment one doesn t exist already any is_label_err_comment comment comment pr get_comments gh_post_pr_comment pr org pr project pr pr_num LABEL_ERR_MSG parse_args - Any argparse ArgumentParser parser = ArgumentParser Check PR labels parser add_argument pr_num type=int add flag non-zero exit code PR does have required labels parser add_argument -- exit-non-zero action= store_true help= Return non-zero exit code PR does have required labels parser parse_args main - None args = parse_args repo = GitRepo get_git_repo_dir get_git_remote_name org project = repo gh_owner_and_name pr = GitHubPR org project args pr_num try has_required_labels pr print LABEL_ERR_MSG flush=True add_label_err_comment pr args exit_non_zero raise RuntimeError PR does have required labels delete_all_label_err_comments pr except Exception e args exit_non_zero raise RuntimeError f Error checking labels e e sys exit __name__ == __main__ main