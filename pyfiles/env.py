__future__ annotations os platform struct itertools chain typing cast TYPE_CHECKING TYPE_CHECKING collections abc Iterable CMAKE_MINIMUM_VERSION_STRING = IS_WINDOWS = platform system == Windows IS_DARWIN = platform system == Darwin IS_LINUX = platform system == Linux IS_ BIT = struct calcsize P == BUILD_DIR = build check_env_flag name str default str = - bool os getenv name default upper ON YES TRUE Y check_negative_env_flag name str default str = - bool os getenv name default upper OFF NO FALSE N gather_paths env_vars Iterable str - list str list chain os getenv v split os pathsep v env_vars lib_paths_from_base base_path str - list str os path join base_path s s lib x lib lib We promised CXXFLAGS should also affected CFLAGS CFLAGS os environ CXXFLAGS os environ os environ CXXFLAGS = os environ CFLAGS BuildType Checks build type The build type will given attr ` cmake_build_type_env ` If attr ` cmake_build_type_env ` ` ` None ` ` then build type will inferred ` ` CMakeCache txt ` ` If ` ` CMakeCache txt ` ` does exist os environ CMAKE_BUILD_TYPE will used Args cmake_build_type_env str The value os environ CMAKE_BUILD_TYPE If None actual build type will inferred __init__ cmake_build_type_env str &#124; None = None - None cmake_build_type_env None build_type_string = cmake_build_type_env cmake_cache_txt = os path join BUILD_DIR CMakeCache txt os path isfile cmake_cache_txt Found CMakeCache txt Use build type specified cmake_utils get_cmake_cache_variables_from_file open cmake_cache_txt f cmake_cache_vars = get_cmake_cache_variables_from_file f Normally anti-pattern determine build type CMAKE_BUILD_TYPE because used multi-configuration build tools such Visual Studio XCode But since we always communicate CMake using CMAKE_BUILD_TYPE our Python scripts OK here build_type_string = cast str cmake_cache_vars CMAKE_BUILD_TYPE build_type_string = os environ get CMAKE_BUILD_TYPE Release is_debug - bool Checks Debug build build_type_string == Debug is_rel_with_deb_info - bool Checks RelWithDebInfo build build_type_string == RelWithDebInfo is_release - bool Checks Release build build_type_string == Release hotpatch environment variable CMAKE_BUILD_TYPE CMAKE_BUILD_TYPE always prevails over DEBUG REL_WITH_DEB_INFO CMAKE_BUILD_TYPE os environ check_env_flag DEBUG os environ CMAKE_BUILD_TYPE = Debug check_env_flag REL_WITH_DEB_INFO os environ CMAKE_BUILD_TYPE = RelWithDebInfo os environ CMAKE_BUILD_TYPE = Release build_type = BuildType