Owner s oncall package deploy torch package _digraph DiGraph torch testing _internal common_utils run_tests try common PackageTestCase except ImportError Support case where we run file directly common PackageTestCase TestDiGraph PackageTestCase Test DiGraph structure we use represent dependencies PackageExporter test_successors g = DiGraph g add_edge foo bar g add_edge foo baz g add_node qux assertIn bar list g successors foo assertIn baz list g successors foo assertEqual len list g successors qux test_predecessors g = DiGraph g add_edge foo bar g add_edge foo baz g add_node qux assertIn foo list g predecessors bar assertIn foo list g predecessors baz assertEqual len list g predecessors qux test_successor_not_in_graph g = DiGraph assertRaises ValueError g successors graph test_predecessor_not_in_graph g = DiGraph assertRaises ValueError g predecessors graph test_node_attrs g = DiGraph g add_node foo my_attr= other_attr= assertEqual g nodes foo my_attr assertEqual g nodes foo other_attr test_node_attr_update g = DiGraph g add_node foo my_attr= assertEqual g nodes foo my_attr g add_node foo my_attr= different assertEqual g nodes foo my_attr different test_edges g = DiGraph g add_edge g add_edge g add_edge g add_edge edge_list = list g edges assertEqual len edge_list assertIn edge_list assertIn edge_list assertIn edge_list assertIn edge_list test_iter g = DiGraph g add_node g add_node g add_node nodes = set nodes update g assertEqual nodes test_contains g = DiGraph g add_node yup assertTrue yup g assertFalse nup g test_contains_non_hashable g = DiGraph assertFalse g test_forward_closure g = DiGraph g add_edge g add_edge g add_edge g add_edge assertTrue g forward_transitive_closure == assertTrue g forward_transitive_closure == test_all_paths g = DiGraph g add_edge g add_edge g add_edge g add_edge g add_edge g add_edge g add_edge result = g all_paths get rid indeterminism actual = i strip \n i result split - expected = - - - - - assertEqual actual expected __name__ == __main__ run_tests