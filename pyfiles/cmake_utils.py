This refactored cmake py avoid circular imports issue env py which calls get_cmake_cache_variables_from_file __future__ annotations re typing IO Optional Union CMakeValue = Optional Union bool str convert_cmake_value_to_python_value cmake_value str cmake_type str - CMakeValue r Convert CMake value string form Python value Args cmake_value string The CMake value string form e g ON OFF cmake_type string The CMake type attr ` cmake_value ` Returns A Python value corresponding attr ` cmake_value ` type attr ` cmake_type ` cmake_type = cmake_type upper up_val = cmake_value upper cmake_type == BOOL https cmake org cmake help latest manual cmake-generator-expressions html#genex BOOL up_val FALSE OFF N NO NOTFOUND up_val endswith -NOTFOUND cmake_type == FILEPATH up_val endswith -NOTFOUND None cmake_value Directly cmake_value cmake_value get_cmake_cache_variables_from_file cmake_cache_file IO str - dict str CMakeValue r Gets values CMakeCache txt into dictionary Args cmake_cache_file A CMakeCache txt file object Returns dict A ` ` dict ` ` containing value cached CMake variables results = i line enumerate cmake_cache_file line = line strip line line startswith Blank comment line skip continue Almost any character can part variable name value As practical matter we assume type must valid C variable name It should match following kinds strings USE_CUDA BOOL=ON USE_CUDA BOOL=ON USE_CUDA=ON USE_CUDA =ON Intel R MKL-DNN_SOURCE_DIR STATIC= path pytorch third_party ideep mkl-dnn OpenMP_COMPILE_RESULT_CXX_openmp experimental INTERNAL=FALSE matched = re match r + \ \s a-zA-Z_- a-zA-Z - _- \s =\s line matched None Illegal line raise ValueError f Unexpected line i repr cmake_cache_file line _ variable type_ value = matched groups type_ None type_ = type_ upper INTERNAL STATIC CMake internal variable do touch continue results variable = convert_cmake_value_to_python_value value type_ results