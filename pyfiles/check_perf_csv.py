argparse sys textwrap pandas pd SKIP_TEST_LISTS = https github com pytorch pytorch issues channel_shuffle_batch_size _channels_per_group _height _width _groups _channel_lastTrue batchnorm_N _C _cpu_trainingTrue_cudnnFalse index_add__M _N _K _dim _cpu_dtypetorch float interpolate_input_size _output_size _channels_lastTrue_modelinear original_kernel_tensor_N _C _H _W _zero_point_dtypetorch int _nbits _cpu original_kernel_tensor_N _C _H _W _zero_point_dtypetorch int _nbits _cpu get_field csv case str field str try csv loc csv Case Name == case field item except Exception None check_perf actual_csv expected_csv expected_filename threshold failed = improved = baseline_not_found = actual_csv = actual_csv ~actual_csv Case Name isin set SKIP_TEST_LISTS case actual_csv Case Name perf = get_field actual_csv case Execution Time expected_perf = get_field expected_csv case Execution Time expected_perf None status = Baseline Not Found print f case status baseline_not_found append case continue speed_up = expected_perf perf - threshold = speed_up + threshold status = PASS print f case status continue speed_up = + threshold status = IMPROVED improved append case status = FAILED failed append case print f case status perf= perf expected= expected_perf msg = failed improved baseline_not_found failed msg += textwrap dedent f Error len failed models have performance status regressed join failed improved msg += textwrap dedent f Improvement len improved models have performance status improved join improved baseline_not_found msg += textwrap dedent f Baseline Not Found len baseline_not_found models don t have baseline data join baseline_not_found msg += textwrap dedent f If change expected you can update ` expected_filename ` reflect new baseline failed improved baseline_not_found msg main parser = argparse ArgumentParser parser add_argument -- actual type=str required=True parser add_argument -- expected type=str required=True parser add_argument -- threshold type=float default= help= threshold define regression improvement args = parser parse_args actual = pd read_csv args actual actual drop_duplicates subset= Case Name keep= first inplace=True expected = pd read_csv args expected failed msg = check_perf actual expected args expected args threshold failed print msg sys exit __name__ == __main__ main