usr bin env python sys pathlib Path typing Any cast yaml GITHUB_DIR = Path __file__ parent parent get_workflows_push_tags - set str Extract all known push tags workflows rc set str = set fname GITHUB_DIR workflows glob yml fname open r f wf_yml = yaml safe_load f alias True yaml on_tag = wf_yml get True None push_tag = on_tag get push None isinstance on_tag dict None tags_tag = push_tag get tags None isinstance push_tag dict None isinstance tags_tag list rc update tags_tag rc filter_ciflow_tags tags set str - list str Return sorted list ciflow tags sorted tag - tag tags tag startswith ciflow tag endswith read_probot_config - dict str Any GITHUB_DIR pytorch-probot yml open r f cast dict str Any yaml safe_load f update_probot_config labels set str - None orig = read_probot_config orig ciflow_push_tags = filter_ciflow_tags labels GITHUB_DIR pytorch-probot yml open w f yaml dump orig f indent= sort_keys=False __name__ == __main__ argparse ArgumentParser parser = ArgumentParser Validate update list tags parser add_argument -- validate-tags action= store_true args = parser parse_args pushtags = get_workflows_push_tags args validate_tags config = read_probot_config ciflow_tags = set filter_ciflow_tags pushtags config_tags = set config ciflow_push_tags config_tags = ciflow_tags print Tags mismatch ciflow_tags difference config_tags print Reference workflows config ciflow_tags difference config_tags config_tags difference ciflow_tags print Reference config workflows config_tags difference ciflow_tags print f Please run __file__ remediate difference sys exit - print All tags listed pytorch-probot yml update_probot_config pushtags