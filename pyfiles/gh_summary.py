__future__ annotations logging os textwrap pathlib Path typing TYPE_CHECKING cli lib common utils get_wheels jinja Template TYPE_CHECKING collections abc Iterable Mapping logger = logging getLogger __name__ _TPL_CONTENT = Template textwrap dedent \ ## title ` ` ` lang content ` ` ` _TPL_LIST_ITEMS = Template textwrap dedent \ ## title items - pkg relpath _ no item found _ endfor _TPL_TABLE = Template textwrap dedent \ - rows &#124; cols &#124; join &#124; &#124; &#124; - _ cols --- &#124; - endfor - r rows &#124; - c cols r get c &#124; - endfor - endfor - _ no data _ - endif gh_summary_path - Path &#124; None Return Path GitHub step summary file None set p = os environ get GITHUB_STEP_SUMMARY Path p p None write_gh_step_summary md str append_content bool = True - bool Write Markdown content GitHub Step Summary file GITHUB_STEP_SUMMARY set append_content default true True append end file overwrite whole file Returns True written successfully GitHub Actions environment False skipped e g running locally where variable set sp = gh_summary_path sp logger info gh-summary GITHUB_STEP_SUMMARY set skipping write False md_clean = textwrap dedent md strip + \n mode = append_content w sp open mode encoding= utf- f f write md_clean True md_heading text str level int = - str Generate Markdown heading string given level - f max min level text \n md_details summary str content str - str Generate collapsible details block summary inner content f details \n summary summary summary \n\n content \n\n details \n summarize_content_from_file output_dir Path freeze_file str title str = Content file code_lang str = e g text ini - bool f = Path output_dir freeze_file f exists False content = f read_text encoding= utf- strip md = render_content content title=title lang=code_lang write_gh_step_summary md summarize_wheels path Path title str = Wheels max_depth int = items = get_wheels path max_depth=max_depth items False md = render_list items title=title write_gh_step_summary md md_kv_table rows Iterable Mapping str str &#124; int &#124; float - str Render list dicts Markdown table using Jinja template rows = list rows cols = list k r rows k r keys md = _TPL_TABLE render cols=cols rows=rows strip + \n md render_list items Iterable str title str = List - str tpl = _TPL_LIST_ITEMS md = tpl render title=title items=items md render_content content str title str = Content lang str = text - str tpl = _TPL_CONTENT md = tpl render title=title content=content lang=lang md