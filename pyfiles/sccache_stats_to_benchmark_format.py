glob json os pathlib Path typing Any REPO_ROOT = Path __file__ resolve parent parent parent flatten_data d dict str Any - dict str Any Flatten sccache stats data possibly nested dictionary flat dictionary For example input cache hit miss will transformed cache_hit cache_miss flat_data = key value d items isinstance value dict k v flatten_data value items flat_data f key _ k = v flat_data key = value flat_data main - None records = file glob glob str REPO_ROOT sccache-stats- json open file f data = json load f I don t know what sccache info will most useful yet sccache json has decent number keys so just flatten data store all records append benchmark name sccache_stats metric name sccache_stats benchmark_values int os environ get BUILD_TIME extra_info flatten_data data output_file = REPO_ROOT test test-reports sccache-stats json os makedirs output_file parent exist_ok=True open output_file w f json dump records f __name__ == __main__ main