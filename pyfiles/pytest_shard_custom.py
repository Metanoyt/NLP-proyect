Custom pytest shard plugin https github com AdamGleave pytest-shard blob dac b b d cf d e d ad pytest_shard pytest_shard py#L Modifications shards now indexed instead indexed option printing items shard hashlib _pytest config argparsing Parser pytest_addoptions parser Parser Add options control sharding group = parser getgroup shard group addoption -- shard-id dest= shard_id type=int default= help= Number shard group addoption -- num-shards dest= num_shards type=int default= help= Total number shards group addoption -- print-items dest= print_items action= store_true default=False help= Print out items being tested shard PytestShardPlugin __init__ config config = config pytest_report_collectionfinish config items - str Log how many which items tested shard msg = f Running len items items shard config getoption print_items msg += + join item nodeid item items msg sha hash x str - int int from_bytes hashlib sha x encode digest little filter_items_by_shard items shard_id int num_shards int Computes ` items ` should tested ` shard_id ` out ` num_shards ` total shards new_items = item item items sha hash item nodeid num_shards == shard_id - new_items pytest_collection_modifyitems config items Mutate collection consist just items tested shard shard_id = config getoption shard_id shard_total = config getoption num_shards shard_id shard_id shard_total raise ValueError f shard_id valid shard ID out shard_total total shards items = filter_items_by_shard items shard_id shard_total