Owner s module fx Tests graph pickler using pickling all inductor tests contextlib importlib os sys unittest mock patch torch torch library torch _dynamo testing make_test_cls_with_patches torch _inductor test_case TestCase torch testing _internal inductor_utils HAS_CPU Make helper files test importable pytorch_test_dir = os path dirname os path dirname os path realpath __file__ sys path append pytorch_test_dir inductor test_torchinductor manual=fbcode caffe test inductor test_inductor-library check_model CommonTemplate copy_tests TestFailure importlib import_module filelock xfail default set is_skip=True skip test_failures = TypeError cannot pickle generator object test_layer_norm_graph_pickler TestFailure cpu is_skip=True make_test_cls cls xfail_prop= _expected_failure_graph_pickler make_test_cls_with_patches cls GraphPickler _graph_pickler torch _inductor compile_fx fx_compile_mode torch _inductor compile_fx FxCompileMode SERIALIZE xfail_prop=xfail_prop GraphPicklerCommonTemplate = make_test_cls CommonTemplate HAS_CPU GraphPicklerCpuTests TestCase common = check_model device = cpu copy_tests GraphPicklerCommonTemplate GraphPicklerCpuTests cpu test_failures TestGraphPickler TestCase setUp torch _dynamo reset TestCase setUp _stack = contextlib ExitStack _stack enter_context patch torch _inductor compile_fx fx_compile_mode torch _inductor compile_fx FxCompileMode SERIALIZE tearDown _stack close TestCase tearDown torch _dynamo reset test_simple Make sure compiling works when we pass input + output fx_codegen_and_compile through serde fn b + b check_model fn torch tensor False True torch tensor True True __name__ == __main__ raise RuntimeError This test currently used should enabled discover_tests py required