mypy allow-untyped-defs core reify unify type ignore attr-defined unification_tools first groupby type ignore utils _toposort freeze variable isvar Dispatcher __init__ name name = name funcs = ordering = add signature func funcs freeze signature = func ordering = ordering funcs __call__ args kwargs func _ = resolve args func args kwargs resolve args n = len args signature ordering len signature = n continue s = unify freeze args signature s False result = funcs signature result s raise NotImplementedError No match found \nKnown matches + str ordering + \nInput + str args register signature _ func add signature func _ VarDispatcher Dispatcher A dispatcher calls functions variable names xdoctest +SKIP d = VarDispatcher d x = var x d register inc x f x x + d register double x f x x d inc d double __call__ args kwargs func s = resolve args d = k token v k v s items func d global_namespace = type ignore var-annotated match signature kwargs namespace = kwargs get namespace global_namespace dispatcher = kwargs get Dispatcher Dispatcher _ func name = func __name__ name namespace namespace name = dispatcher name d = namespace name d add signature func d _ supercedes b ` ` ` ` more specific match than ` ` b ` ` isvar b isvar True s = unify b s False False s = k v k v s items isvar k isvar v reify s == True reify b s == b False Taken multipledispatch edge b tie_breaker=hash A should checked before B Tie broken tie_breaker defaults ` ` hash ` ` supercedes b supercedes b tie_breaker tie_breaker b True False Taken multipledispatch ordering signatures A sane ordering signatures check first last Topological sort edges given ` ` edge ` ` ` ` supercedes ` ` signatures = list map tuple signatures edges = b signatures b signatures edge b edges = groupby first edges s signatures s edges edges s = edges = k b b v k v edges items type ignore attr-defined assignment _toposort edges