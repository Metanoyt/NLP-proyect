hashlib abc ABC abstractmethod collections abc Sequence functools lru_cache typing Any Callable Optional Union typing_extensions TypeAlias torch fx graph CustomGraphPass ABC Implement interface custom Graph passes The __call__ method contains implementation custom pass The uuid method enables inductor cache compiled graphs when your custom passes applied This method can any identifier long uniquely identifies your implementation can pickled The caching logic includes identifier its key calculation i e any new value will effectively invalidate existing entries We expect custom passes would typically depend purely textual representation implementation In case we recommend using get_hash_for_files helper below compute unique hash contents static list source files i e source s containing custom pass implementation That approach ensures any change implementation will mean new uuid IMPORTANT If your custom pass s behavior depends some external state then you ll need implement something more complicated disable caching EXAMPLE MyCustomGraphPass CustomGraphPass __call__ graph torch fx graph Graph - None my custom graph optimization pass uuid - Optional Any get_hash_for_files __file__ abstractmethod __call__ graph torch fx graph Graph - None Implementation custom pass abstractmethod uuid - Optional Any Return ID uniquely identify your custom pass implementation Return None skip inductor code caching entirely CustomGraphModulePass ABC Implement interface custom Graph passes The __call__ method contains implementation custom pass The uuid method enables inductor cache compiled graphs when your custom passes applied This method can any identifier long uniquely identifies your implementation can pickled The caching logic includes identifier its key calculation i e any new value will effectively invalidate existing entries We expect custom passes would typically depend purely textual representation implementation In case we recommend using get_hash_for_files helper below compute unique hash contents static list source files i e source s containing custom pass implementation That approach ensures any change implementation will mean new uuid abstractmethod __call__ gm torch fx GraphModule - None Implementation custom pass abstractmethod uuid - Optional Any Return ID uniquely identify your custom pass implementation Return None skip inductor code caching entirely CustomGraphPassType TypeAlias = Optional Union CustomGraphPass Callable torch fx graph Graph None lru_cache get_hash_for_files paths tuple str extra str = - bytes Helper compute unique string hashing contents list files hasher = hashlib sha hasher update extra encode utf- path paths open path rb f hasher update f read hasher digest CustomPartitionerFn ABC Implement interface custom partitioner The __call__ method contains implementation custom partitioner The uuid method enables inductor cache compiled graphs when your custom partitioner applied This method can any identifier long uniquely identifies your implementation can pickled The caching logic includes identifier its key calculation i e any new value will effectively invalidate existing entries We expect custom partitioner would typically depend purely textual representation implementation In case we recommend using get_hash_for_files helper below compute unique hash contents static list source files i e source s containing custom partitioner implementation That approach ensures any change implementation will mean new uuid EXAMPLE torch _inductor custom_graph_pass get_hash_for_files MyCustomPartitionerFn CustomPartitionerFn __call__ gm torch fx GraphModule joint_inputs Sequence object kwargs Any - tuple torch fx GraphModule torch fx GraphModule my custom partitioner implementation uuid - Optional Any get_hash_for_files __file__ abstractmethod __call__ gm torch fx GraphModule joint_inputs Sequence object kwargs Any - tuple torch fx GraphModule torch fx GraphModule Implementation custom partitioner abstractmethod uuid - Optional Any Return ID uniquely identify your custom partitioner implementation Return None skip inductor code caching entirely CustomPartitionerFnType TypeAlias = Optional CustomPartitionerFn