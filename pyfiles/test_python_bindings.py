Owner s oncall jit torch torch testing FileCheck torch testing _internal common_utils raise_on_run_directly torch testing _internal jit_utils JitTestCase TestPythonBindings JitTestCase test_cu_get_functions torch jit script test_get_python_cu_fn x torch Tensor x cu = torch jit _state _python_cu assertTrue test_get_python_cu_fn str fn name fn cu get_functions test_cu_create_function torch jit script fn x torch Tensor x cu = torch _C CompilationUnit cu create_function test_fn fn graph inp = torch randn assertEqual inp cu find_function test_fn inp assertEqual cu find_function doesnt_exist None assertEqual inp cu test_fn inp assertRaises AttributeError cu doesnt_exist inp test_invalidation torch jit script test_invalidation_fn x torch Tensor x gr = test_invalidation_fn graph copy n = gr insertNode gr create prim profile v = n output check they work str n v torch _C _jit_pass_dce gr assertRaisesRegex RuntimeError invalidated str n assertRaisesRegex RuntimeError invalidated str v test_graph_iterator_keepalive torch jit script test_iterator_keepalive_fn x torch Tensor x list would segfault before because inlined_graph temporary had been deleted see issue n = test_iterator_keepalive_fn inlined_graph nodes list n i = test_iterator_keepalive_fn inlined_graph inputs list i o = test_iterator_keepalive_fn inlined_graph outputs list o test_aliasdb torch jit script test_aliasdb_fn x torch Tensor x gr = test_aliasdb_fn graph copy alias_db = gr alias_db assertTrue WILDCARD str alias_db assertTrue digraph alias_db alias_db to_graphviz_str test_graph_create gr = torch _C Graph assertRaises ValueError gr create prim Constant None test_add_input gr = torch _C Graph foo_value = gr addInput foo assert foo_value gr inputs test_canonicalize ir = graph p Tensor Tensor p int Tensor = aten view_expand_placeholder Tensor = aten pointwise_placeholder p p Tensor = aten view_expand_placeholder Tensor = aten pointwise_placeholder graph = torch _C parse_ir ir graph = torch _C _jit_pass_canonicalize graph True graph = torch _C parse_ir ir graph = torch _C _jit_pass_canonicalize graph assertEqual str graph str graph FileCheck check p check_not run graph graph = torch _C parse_ir ir graph = torch _C _jit_pass_canonicalize graph False FileCheck check_not p run graph __name__ == __main__ raise_on_run_directly test test_jit py