======= BEGIN Dynamo patch ======= Owner s module dynamo ruff noqa flake noqa Test copied https raw githubusercontent com python cpython refs tags v Lib test test_userlist py sys torch torch _dynamo test_case unittest torch _dynamo test_case CPythonTestCase torch testing _internal common_utils run_tests __TestCase = CPythonTestCase redirect statements sys importlib abc redirect_imports = test mapping_tests test typinganndata test test_grammar test test_math test test_iter test typinganndata ann_module RedirectImportFinder importlib abc MetaPathFinder find_spec fullname path target=None Check problematic one fullname redirect_imports try Attempt standalone module name = fullname removeprefix test r = importlib import_module name Redirect module sys modules sys modules fullname = r Return module spec found module importlib util find_spec name except ImportError None None Add custom finder sys meta_path sys meta_path insert RedirectImportFinder ======= END DYNAMO PATCH ======= Check every path through every method UserList collections UserList list_tests unittest test support UserListTest list_tests CommonTest type test = UserList test_getslice super test_getslice l = u = type test l i range - assertEqual u i l i assertEqual u i l i j range - assertEqual u i j l i j test_slice_type l = u = UserList l assertIsInstance u u __class__ assertEqual u u test_add_specials u = UserList spam u = u + eggs assertEqual u list spameggs test_radd_specials u = UserList eggs u = spam + u assertEqual u list spameggs u = u __radd__ UserList spam assertEqual u list spameggs test_iadd super test_iadd u = u += UserList assertEqual u test_mixedcmp u = type test assertEqual u assertNotEqual u assertNotEqual u test_mixedadd u = type test assertEqual u + u assertEqual u + test_getitemoverwriteiter Verify __getitem__ overrides recognized __iter__ torch _dynamo error_on_graph_break False T type test __getitem__ key str key + assertEqual next iter T test_userlist_copy u = type test v = u copy assertEqual u v assertEqual type u type v Decorate existing test recursion limit because test C structure ` UserList ` Python structure test_repr_deep = support infinite_recursion list_tests CommonTest test_repr_deep __name__ == __main__ run_tests