mypy allow-untyped-defs collections abc Callable Iterator typing TypeVar torch utils data datapipes _decorator functional_datapipe torch utils data datapipes dataframe dataframe_wrapper df_wrapper torch utils data datapipes datapipe IterDataPipe torch utils data datapipes utils common _check_unpickable_fn StreamWrapper validate_input_col __all__ = FilterIterDataPipe _T = TypeVar _T _T_co = TypeVar _T_co covariant=True functional_datapipe filter FilterIterDataPipe IterDataPipe _T_co r Filters out elements source datapipe according input ` ` filter_fn ` ` functional name ` ` filter ` ` Args datapipe Iterable DataPipe being filtered filter_fn Customized function mapping element boolean input_col Index indices data which ` ` filter_fn ` ` applied such - ` ` None ` ` default apply ` ` filter_fn ` ` data directly - Integer s used list tuple - Key s used dict Example xdoctest +SKIP torchdata datapipes iter IterableWrapper is_even n n == dp = IterableWrapper range filter_dp = dp filter filter_fn=is_even list filter_dp datapipe IterDataPipe _T_co filter_fn Callable __init__ datapipe IterDataPipe _T_co filter_fn Callable input_col=None - None super __init__ datapipe = datapipe _check_unpickable_fn filter_fn filter_fn = filter_fn type ignore assignment input_col = input_col validate_input_col filter_fn input_col _apply_filter_fn data - bool input_col None filter_fn data isinstance input_col list tuple args = tuple data col col input_col filter_fn args filter_fn data input_col __iter__ - Iterator _T_co data datapipe condition filtered = _returnIfTrue data condition yield filtered StreamWrapper close_streams data _returnIfTrue data _T - tuple bool _T condition = _apply_filter_fn data df_wrapper is_column condition We operating DataFrames filter here result = idx mask enumerate df_wrapper iterate condition mask result append df_wrapper get_item data idx result True df_wrapper concat result False None type ignore return-value isinstance condition bool raise ValueError Boolean output required ` filter_fn ` FilterIterDataPipe got type condition condition data