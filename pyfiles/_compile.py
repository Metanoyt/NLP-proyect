APIs related torch compile which lazily torch _dynamo avoid circular dependencies functools collections abc Callable typing Optional overload TypeVar Union typing_extensions ParamSpec _T = TypeVar _T _P = ParamSpec _P overload _disable_dynamo fn Callable _P _T recursive bool = True - Callable _P _T overload _disable_dynamo fn None = None recursive bool = True - Callable Callable _P _T Callable _P _T _disable_dynamo fn Optional Callable _P _T = None recursive bool = True - Union Callable _P _T Callable Callable _P _T Callable _P _T This API should only used inside torch external users should still use torch _dynamo disable The main goal API avoid circular imports issues common while using _dynamo disable inside torch itself This API avoids lazily importing torch _dynamo time invocation decorated function fn None functools wraps fn inner args _P args kwargs _P kwargs - _T cache first invocation avoid adding too much overhead disable_fn = getattr fn __dynamo_disable None disable_fn None torch _dynamo We can safely turn off functools wraps here because inner already wraps fn outer scope disable_fn = torch _dynamo disable fn recursive wrapping=False fn __dynamo_disable = disable_fn type ignore attr-defined disable_fn args kwargs inner decorator usage like _disable_dynamo recursive=False The resulting object expects original decorated function arg functools partial _disable_dynamo recursive=recursive