asyncio sys weakref asyncio AbstractEventLoop Future collections abc Awaitable Coroutine Generator Iterator contextlib contextmanager ExitStack contextvars Context typing Any Callable Optional Protocol TypeVar torch utils _ordered_set OrderedSet T = TypeVar T TCoro = Generator Any None T sys version_info = TaskFactory Protocol __call__ __loop AbstractEventLoop __factory Coroutine None None object &#124; Generator None None object __context Context &#124; None = None - asyncio futures Future object TaskFactoryType = TaskFactory TaskFactoryType = Callable AbstractEventLoop Generator TCoro None T Future type ignore valid-type await_sync awaitable Awaitable T - T get_loop loop loop run_until_complete awaitable contextmanager get_loop always_create_new_loop bool = False - Iterator AbstractEventLoop try loop = asyncio get_event_loop except RuntimeError re There no current event loop thread str re _new_loop loop yield loop raise contextmanager _restore_loop loop asyncio AbstractEventLoop - Iterator None try yield finally asyncio set_event_loop loop contextmanager _restore_running_loop - Iterator None loop_from_events = asyncio events _get_running_loop asyncio events _set_running_loop None try yield finally asyncio events _set_running_loop loop_from_events ExitStack stack loop is_running stack enter_context _restore_running_loop stack enter_context _restore_loop loop=loop loop = stack enter_context _new_loop loop get_task_factory type ignore arg-type loop is_closed loop = stack enter_context _new_loop type ignore arg-type always_create_new_loop stack enter_context _restore_loop loop=loop loop = stack enter_context _new_loop type ignore arg-type yield loop contextmanager _new_loop task_factory Optional TaskFactoryType = None - Iterator asyncio AbstractEventLoop loop = asyncio new_event_loop tasks = _patch_loop loop task_factory pyre-ignore loop set_task_factory task_factory type ignore arg-type asyncio set_event_loop loop try yield loop finally try _cancel_all_tasks loop tasks finally asyncio set_event_loop None loop close _cancel_all_tasks loop AbstractEventLoop tasks OrderedSet Future type ignore type-arg - None to_cancel = task task tasks task done to_cancel pyre-fixme Awaitable assigned ` task ` never awaited task to_cancel task cancel pyrefly ignore bad-argument-type loop run_until_complete asyncio gather to_cancel return_exceptions=True task to_cancel task cancelled continue task exception None loop call_exception_handler message unhandled exception during asyncio run shutdown exception task exception task task _patch_loop loop AbstractEventLoop - OrderedSet Future type ignore type-arg tasks weakref WeakSet Future = weakref WeakSet type ignore type-arg task_factories list Optional TaskFactoryType = None _set_task_factory factory Optional TaskFactoryType - None task_factories = factory _get_task_factory - Optional TaskFactoryType task_factories _safe_task_factory loop AbstractEventLoop coro TCoro type ignore type-arg context Context &#124; None = None - asyncio Future type ignore valid-type type-arg task_factory = task_factories task_factory None sys version_info = pyrefly ignore bad-argument-type task = asyncio Task coro loop=loop context=context task = asyncio Task coro loop=loop pyre-ignore ` Task ` has no attribute ` _source_traceback ` task _source_traceback type ignore attr-defined del task _source_traceback type ignore attr-defined - pragma no cover type ignore attr-defined sys version_info = task = task_factory loop coro context=context type ignore arg-type call-arg assignment task = task_factory loop coro type ignore arg-type ` Union Task Any Future Any ` tasks add task task pyre-ignore loop set_task_factory _safe_task_factory type ignore method-assign arg-type pyre-ignore loop set_task_factory = _set_task_factory type ignore method-assign assignment pyre-ignore loop get_task_factory = _get_task_factory type ignore method-assign assignment tasks type ignore return-value