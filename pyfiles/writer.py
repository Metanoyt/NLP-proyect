mypy allow-untyped-defs Provide API writing protocol buffers event files consumed TensorBoard visualization os time typing Optional TYPE_CHECKING Union torch TYPE_CHECKING matplotlib figure Figure tensorboard compat tf tensorboard compat proto event_pb tensorboard compat proto event_pb Event SessionLog tensorboard plugins projector projector_config_pb ProjectorConfig tensorboard summary writer event_file_writer EventFileWriter _convert_np make_np _embedding get_embedding_info make_mat make_sprite make_tsv write_pbtxt _onnx_graph load_onnx_graph _pytorch_graph graph _utils figure_to_image summary audio custom_scalars histogram histogram_raw hparams image image_boxes mesh pr_curve pr_curve_raw scalar tensor_proto text video __all__ = FileWriter SummaryWriter FileWriter Writes protocol buffers event files consumed TensorBoard The ` FileWriter ` provides mechanism create event file given directory add summaries events The updates file contents asynchronously This allows training program call methods add data file directly training loop without slowing down training __init__ log_dir max_queue= flush_secs= filename_suffix= Create ` FileWriter ` event file On construction writer creates new event file ` log_dir ` The other arguments constructor control asynchronous writes event file Args log_dir A string Directory where event file will written max_queue Integer Size queue pending events summaries before one add calls forces flush disk Default ten items flush_secs Number How often seconds flush pending events summaries disk Default every two minutes filename_suffix A string Suffix added all event filenames log_dir directory More details filename construction tensorboard summary writer event_file_writer EventFileWriter Sometimes PosixPath passed we need coerce string all cases TODO See we can remove future we actually ones passing PosixPath log_dir = str log_dir event_writer = EventFileWriter log_dir max_queue flush_secs filename_suffix get_logdir Return directory where event file will written event_writer get_logdir add_event event step=None walltime=None Add event event file Args event An ` Event ` protocol buffer step Number Optional global step value training process record event walltime float Optional walltime override default current walltime time time seconds after epoch event wall_time = time time walltime None walltime step None Make sure step converted numpy other formats since protobuf might convert depending version event step = int step event_writer add_event event add_summary summary global_step=None walltime=None Add ` Summary ` protocol buffer event file This method wraps provided summary ` Event ` protocol buffer adds event file Args summary A ` Summary ` protocol buffer global_step Number Optional global step value training process record summary walltime float Optional walltime override default current walltime time time seconds after epoch event = event_pb Event summary=summary add_event event global_step walltime add_graph graph_profile walltime=None Add ` Graph ` step stats protocol buffer event file Args graph_profile A ` Graph ` step stats protocol buffer walltime float Optional walltime override default current walltime time time seconds after epoch graph = graph_profile stepstats = graph_profile event = event_pb Event graph_def=graph SerializeToString add_event event None walltime trm = event_pb TaggedRunMetadata tag= step run_metadata=stepstats SerializeToString event = event_pb Event tagged_run_metadata=trm add_event event None walltime add_onnx_graph graph walltime=None Add ` Graph ` protocol buffer event file Args graph A ` Graph ` protocol buffer walltime float Optional walltime override default current _get_file_writerfrom time time event = event_pb Event graph_def=graph SerializeToString add_event event None walltime flush Flushes event file disk Call method make sure all pending events have been written disk event_writer flush close Flushes event file disk close file Call method when you do need summary writer anymore event_writer close reopen Reopens EventFileWriter Can called after ` close ` add more events same directory The events will go into new events file Does nothing EventFileWriter closed event_writer reopen SummaryWriter Writes entries directly event files log_dir consumed TensorBoard The ` SummaryWriter ` provides high-level API create event file given directory add summaries events The updates file contents asynchronously This allows training program call methods add data file directly training loop without slowing down training __init__ log_dir=None comment= purge_step=None max_queue= flush_secs= filename_suffix= Create ` SummaryWriter ` will write out events summaries event file Args log_dir str Save directory location Default runs CURRENT_DATETIME_HOSTNAME which changes after each run Use hierarchical folder structure compare between runs easily e g pass runs exp runs exp etc each new experiment compare across them comment str Comment log_dir suffix appended default ` ` log_dir ` ` If ` ` log_dir ` ` assigned argument has no effect purge_step int When logging crashes step math ` T+X ` restarts step math ` T ` any events whose global_step larger equal math ` T ` will purged hidden TensorBoard Note crashed resumed experiments should have same ` ` log_dir ` ` max_queue int Size queue pending events summaries before one add calls forces flush disk Default ten items flush_secs int How often seconds flush pending events summaries disk Default every two minutes filename_suffix str Suffix added all event filenames log_dir directory More details filename construction tensorboard summary writer event_file_writer EventFileWriter Examples torch utils tensorboard SummaryWriter create summary writer automatically generated folder name writer = SummaryWriter folder location runs May _ - - _s-MacBook-Pro local create summary writer using specified folder name writer = SummaryWriter my_experiment folder location my_experiment create summary writer comment appended writer = SummaryWriter comment= LR_ _BATCH_ folder location runs May _ - - _s-MacBook-Pro localLR_ _BATCH_ torch _C _log_api_usage_once tensorboard create summarywriter log_dir socket datetime datetime current_time = datetime now strftime b d_ H- M- S log_dir = os path join runs current_time + _ + socket gethostname + comment log_dir = log_dir purge_step = purge_step max_queue = max_queue flush_secs = flush_secs filename_suffix = filename_suffix Initialize file writers they can cleared out close recreated later needed file_writer = all_writers = None _get_file_writer Create default bins histograms see generate_testdata py tensorflow tensorboard v = e- buckets = neg_buckets = while v e pyrefly ignore bad-argument-type buckets append v pyrefly ignore bad-argument-type neg_buckets append -v v = default_bins = neg_buckets - + + buckets _get_file_writer Return default FileWriter instance Recreates closed all_writers None file_writer None pyrefly ignore bad-assignment file_writer = FileWriter log_dir max_queue flush_secs filename_suffix pyrefly ignore bad-assignment missing-attribute all_writers = file_writer get_logdir file_writer purge_step None most_recent_step = purge_step pyrefly ignore missing-attribute file_writer add_event Event step=most_recent_step file_version= brain Event pyrefly ignore missing-attribute file_writer add_event Event step=most_recent_step session_log=SessionLog status=SessionLog START purge_step = None file_writer get_logdir Return directory where event files will written log_dir add_hparams hparam_dict metric_dict hparam_domain_discrete=None run_name=None global_step=None Add set hyperparameters compared TensorBoard Args hparam_dict dict Each key-value pair dictionary name hyper parameter s corresponding value The type value can one ` bool ` ` string ` ` float ` ` int ` ` None ` metric_dict dict Each key-value pair dictionary name metric s corresponding value Note key used here should unique tensorboard record Otherwise value you added ` ` add_scalar ` ` will displayed hparam plugin In most cases unwanted hparam_domain_discrete Optional Dict str List Any A dictionary contains names hyperparameters all discrete values they can hold run_name str Name run included part logdir If unspecified will use current timestamp global_step int Global step value record Examples torch utils tensorboard SummaryWriter SummaryWriter w i range w add_hparams lr i bsize i hparam accuracy i hparam loss i Expected result image _static img tensorboard add_hparam png scale torch _C _log_api_usage_once tensorboard logging add_hparams type hparam_dict dict type metric_dict dict raise TypeError hparam_dict metric_dict should dictionary exp ssi sei = hparams hparam_dict metric_dict hparam_domain_discrete run_name run_name = str time time logdir = os path join _get_file_writer get_logdir run_name SummaryWriter log_dir=logdir w_hp w_hp file_writer add_summary exp global_step w_hp file_writer add_summary ssi global_step w_hp file_writer add_summary sei global_step k v metric_dict items w_hp add_scalar k v global_step add_scalar tag scalar_value global_step=None walltime=None new_style=False double_precision=False Add scalar data summary Args tag str Data identifier scalar_value float string blobname Value save global_step int Global step value record walltime float Optional override default walltime time time seconds after epoch event new_style boolean Whether use new style tensor field old style simple_value field New style could lead faster data loading Examples torch utils tensorboard SummaryWriter writer = SummaryWriter x = range i x writer add_scalar y= x i i writer close Expected result image _static img tensorboard add_scalar png scale torch _C _log_api_usage_once tensorboard logging add_scalar summary = scalar tag scalar_value new_style=new_style double_precision=double_precision _get_file_writer add_summary summary global_step walltime add_scalars main_tag tag_scalar_dict global_step=None walltime=None Add many scalar data summary Args main_tag str The parent name tags tag_scalar_dict dict Key-value pair storing tag corresponding values global_step int Global step value record walltime float Optional override default walltime time time seconds after epoch event Examples torch utils tensorboard SummaryWriter writer = SummaryWriter r = i range writer add_scalars run_ h xsinx i np sin i r xcosx i np cos i r tanx np tan i r i writer close This call adds three values same scalar plot tag run_ h TensorBoard s scalar section Expected result image _static img tensorboard add_scalars png scale torch _C _log_api_usage_once tensorboard logging add_scalars walltime = time time walltime None walltime fw_logdir = _get_file_writer get_logdir tag scalar_value tag_scalar_dict items fw_tag = fw_logdir + + main_tag replace _ + _ + tag all_writers None raise AssertionError all_writers None fw_tag all_writers keys fw = all_writers fw_tag fw = FileWriter fw_tag max_queue flush_secs filename_suffix all_writers fw_tag = fw fw add_summary scalar main_tag scalar_value global_step walltime add_tensor tag tensor global_step=None walltime=None Add tensor data summary Args tag str Data identifier tensor torch Tensor tensor save global_step int Global step value record Examples torch utils tensorboard SummaryWriter writer = SummaryWriter x = torch tensor writer add_scalar x x writer close Expected result Summary tensor float_val tensor shape tag x torch _C _log_api_usage_once tensorboard logging add_tensor summary = tensor_proto tag tensor _get_file_writer add_summary summary global_step walltime add_histogram tag values global_step=None bins= tensorflow walltime=None max_bins=None Add histogram summary Args tag str Data identifier values torch Tensor numpy ndarray string blobname Values build histogram global_step int Global step value record bins str One tensorflow auto fd This determines how bins made You can find other options https numpy org doc stable reference generated numpy histogram html walltime float Optional override default walltime time time seconds after epoch event Examples torch utils tensorboard SummaryWriter numpy np writer = SummaryWriter i range x = np random random writer add_histogram distribution centers x + i i writer close Expected result image _static img tensorboard add_histogram png scale torch _C _log_api_usage_once tensorboard logging add_histogram isinstance bins str bins == tensorflow bins = default_bins _get_file_writer add_summary histogram tag values bins max_bins=max_bins global_step walltime add_histogram_raw tag min max num sum sum_squares bucket_limits bucket_counts global_step=None walltime=None Add histogram raw data Args tag str Data identifier min float int Min value max float int Max value num int Number values sum float int Sum all values sum_squares float int Sum squares all values bucket_limits torch Tensor numpy ndarray Upper value per bucket The number elements should same ` bucket_counts ` bucket_counts torch Tensor numpy ndarray Number values per bucket global_step int Global step value record walltime float Optional override default walltime time time seconds after epoch event see https github com tensorflow tensorboard blob master tensorboard plugins histogram README md Examples torch utils tensorboard SummaryWriter numpy np writer = SummaryWriter dummy_data = idx value enumerate range dummy_data += idx + value bins = list range + bins = np array bins values = np array dummy_data astype float reshape - counts limits = np histogram values bins=bins sum_sq = values dot values writer add_histogram_raw tag= histogram_with_raw_data min=values min max=values max num=len values sum=values sum sum_squares=sum_sq bucket_limits=limits tolist bucket_counts=counts tolist global_step= writer close Expected result image _static img tensorboard add_histogram_raw png scale torch _C _log_api_usage_once tensorboard logging add_histogram_raw len bucket_limits = len bucket_counts raise ValueError len bucket_limits = len bucket_counts see document _get_file_writer add_summary histogram_raw tag min max num sum sum_squares bucket_limits bucket_counts global_step walltime add_image tag img_tensor global_step=None walltime=None dataformats= CHW Add image data summary Note requires ` ` pillow ` ` package Args tag str Data identifier img_tensor torch Tensor numpy ndarray string blobname Image data global_step int Global step value record walltime float Optional override default walltime time time seconds after epoch event dataformats str Image data format specification form CHW HWC HW WH etc Shape img_tensor Default math ` H W ` You can use ` ` torchvision utils make_grid ` ` convert batch tensor into xHxW format call ` ` add_images ` ` let us do job Tensor math ` H W ` math ` H W ` math ` H W ` also suitable long corresponding ` ` dataformats ` ` argument passed e g ` ` CHW ` ` ` ` HWC ` ` ` ` HW ` ` Examples torch utils tensorboard SummaryWriter numpy np img = np zeros img = np arange reshape img = - np arange reshape img_HWC = np zeros img_HWC = np arange reshape img_HWC = - np arange reshape writer = SummaryWriter writer add_image my_image img If you have non-default dimension setting set dataformats argument writer add_image my_image_HWC img_HWC dataformats= HWC writer close Expected result image _static img tensorboard add_image png scale torch _C _log_api_usage_once tensorboard logging add_image _get_file_writer add_summary image tag img_tensor dataformats=dataformats global_step walltime add_images tag img_tensor global_step=None walltime=None dataformats= NCHW Add batched image data summary Note requires ` ` pillow ` ` package Args tag str Data identifier img_tensor torch Tensor numpy ndarray string blobname Image data global_step int Global step value record walltime float Optional override default walltime time time seconds after epoch event dataformats str Image data format specification form NCHW NHWC CHW HWC HW WH etc Shape img_tensor Default math ` N H W ` If ` ` dataformats ` ` specified other shape will accepted e g NCHW NHWC Examples torch utils tensorboard SummaryWriter numpy np img_batch = np zeros i range img_batch i = np arange reshape i img_batch i = - np arange reshape i writer = SummaryWriter writer add_images my_image_batch img_batch writer close Expected result image _static img tensorboard add_images png scale torch _C _log_api_usage_once tensorboard logging add_images _get_file_writer add_summary image tag img_tensor dataformats=dataformats global_step walltime add_image_with_boxes tag img_tensor box_tensor global_step=None walltime=None rescale= dataformats= CHW labels=None Add image draw bounding boxes image Args tag str Data identifier img_tensor torch Tensor numpy ndarray string blobname Image data box_tensor torch Tensor numpy ndarray string blobname Box data detected objects box should represented x y x y global_step int Global step value record walltime float Optional override default walltime time time seconds after epoch event rescale float Optional scale override dataformats str Image data format specification form NCHW NHWC CHW HWC HW WH etc labels list string The label shown each bounding box Shape img_tensor Default math ` H W ` It can specified ` ` dataformats ` ` argument e g CHW HWC box_tensor torch Tensor numpy ndarray string blobname NX where N number boxes each elements row represents xmin ymin xmax ymax torch _C _log_api_usage_once tensorboard logging add_image_with_boxes labels None isinstance labels str labels = labels len labels = box_tensor shape labels = None _get_file_writer add_summary image_boxes tag img_tensor box_tensor rescale=rescale dataformats=dataformats labels=labels global_step walltime add_figure tag str figure Union Figure list Figure global_step Optional int = None close bool = True walltime Optional float = None - None Render matplotlib figure into image add summary Note requires ` ` matplotlib ` ` package Args tag Data identifier figure Figure list figures global_step Global step value record close Flag automatically close figure walltime Optional override default walltime time time seconds after epoch event torch _C _log_api_usage_once tensorboard logging add_figure isinstance figure list add_image tag figure_to_image figure close global_step walltime dataformats= NCHW add_image tag figure_to_image figure close global_step walltime dataformats= CHW add_video tag vid_tensor global_step=None fps= walltime=None Add video data summary Note requires ` ` moviepy ` ` package Args tag str Data identifier vid_tensor torch Tensor Video data global_step int Global step value record fps float int Frames per second walltime float Optional override default walltime time time seconds after epoch event Shape vid_tensor math ` N T C H W ` The values should lie type ` uint ` type ` float ` torch _C _log_api_usage_once tensorboard logging add_video _get_file_writer add_summary video tag vid_tensor fps global_step walltime add_audio tag snd_tensor global_step=None sample_rate= walltime=None Add audio data summary Args tag str Data identifier snd_tensor torch Tensor Sound data global_step int Global step value record sample_rate int sample rate Hz walltime float Optional override default walltime time time seconds after epoch event Shape snd_tensor math ` L ` The values should lie between - torch _C _log_api_usage_once tensorboard logging add_audio _get_file_writer add_summary audio tag snd_tensor sample_rate=sample_rate global_step walltime add_text tag text_string global_step=None walltime=None Add text data summary Args tag str Data identifier text_string str String save global_step int Global step value record walltime float Optional override default walltime time time seconds after epoch event Examples writer add_text lstm This lstm writer add_text rnn This rnn torch _C _log_api_usage_once tensorboard logging add_text _get_file_writer add_summary text tag text_string global_step walltime add_onnx_graph prototxt torch _C _log_api_usage_once tensorboard logging add_onnx_graph _get_file_writer add_onnx_graph load_onnx_graph prototxt add_graph model input_to_model=None verbose=False use_strict_trace=True Add graph data summary Args model torch nn Module Model draw input_to_model torch Tensor list torch Tensor A variable tuple variables fed verbose bool Whether print graph structure console use_strict_trace bool Whether pass keyword argument ` strict ` ` torch jit trace ` Pass False when you want tracer record your mutable container types list dict torch _C _log_api_usage_once tensorboard logging add_graph A valid PyTorch model should have forward method _get_file_writer add_graph graph model input_to_model verbose use_strict_trace staticmethod _encode rawstr I d use urllib I m unsure about differences python python etc retval = rawstr retval = retval replace f ord x retval = retval replace f ord x retval = retval replace \\ x ord \\ noqa UP retval add_embedding mat metadata=None label_img=None global_step=None tag= default metadata_header=None Add embedding projector data summary Args mat torch Tensor numpy ndarray A matrix which each row feature vector data point metadata list A list labels each element will converted string label_img torch Tensor Images correspond each data point global_step int Global step value record tag str Name embedding metadata_header list A list headers multi-column metadata If given each metadata must list values corresponding headers Shape mat math ` N D ` where N number data D feature dimension label_img math ` N C H W ` Examples keyword torch meta = while len meta meta = meta+keyword kwlist get some strings meta = meta i v enumerate meta meta i = v+str i label_img = torch rand i range label_img i =i writer add_embedding torch randn metadata=meta label_img=label_img writer add_embedding torch randn label_img=label_img writer add_embedding torch randn metadata=meta note Categorical i e non-numeric metadata cannot have more than unique values they used coloring embedding projector torch _C _log_api_usage_once tensorboard logging add_embedding mat = make_np mat global_step None global_step = clear pbtxt Maybe we should encode tag so slashes don t trip us up I don t think will mess us up better safe than sorry subdir = f str global_step zfill _encode tag save_path = os path join _get_file_writer get_logdir subdir fs = tf io gfile fs exists save_path fs isdir save_path print warning Embedding dir exists did you set global_step add_embedding raise NotADirectoryError f Path ` save_path ` exists file Cannot proceed fs makedirs save_path metadata None mat shape = len metadata raise AssertionError #labels should equal #data points make_tsv metadata save_path metadata_header=metadata_header label_img None mat shape = label_img shape raise AssertionError #images should equal #data points make_sprite label_img save_path mat ndim = raise AssertionError mat should D where mat size number data points make_mat mat save_path Filesystem doesn t necessarily have append semantics so we store internal buffer append re-write whole file after each embedding added hasattr _projector_config _projector_config = ProjectorConfig embedding_info = get_embedding_info metadata label_img subdir global_step tag _projector_config embeddings extend embedding_info google protobuf text_format config_pbtxt = text_format MessageToString _projector_config write_pbtxt _get_file_writer get_logdir config_pbtxt add_pr_curve tag labels predictions global_step=None num_thresholds= weights=None walltime=None Add precision recall curve Plotting precision-recall curve lets you understand your model s performance under different threshold settings With function you provide ground truth labeling T F prediction confidence usually output your model each target The TensorBoard UI will let you choose threshold interactively Args tag str Data identifier labels torch Tensor numpy ndarray string blobname Ground truth data Binary label each element predictions torch Tensor numpy ndarray string blobname The probability element classified true Value should global_step int Global step value record num_thresholds int Number thresholds used draw curve walltime float Optional override default walltime time time seconds after epoch event Examples torch utils tensorboard SummaryWriter numpy np labels = np random randint size= binary label predictions = np random rand writer = SummaryWriter writer add_pr_curve pr_curve labels predictions writer close torch _C _log_api_usage_once tensorboard logging add_pr_curve labels predictions = make_np labels make_np predictions _get_file_writer add_summary pr_curve tag labels predictions num_thresholds weights global_step walltime add_pr_curve_raw tag true_positive_counts false_positive_counts true_negative_counts false_negative_counts precision recall global_step=None num_thresholds= weights=None walltime=None Add precision recall curve raw data Args tag str Data identifier true_positive_counts torch Tensor numpy ndarray string blobname true positive counts false_positive_counts torch Tensor numpy ndarray string blobname false positive counts true_negative_counts torch Tensor numpy ndarray string blobname true negative counts false_negative_counts torch Tensor numpy ndarray string blobname false negative counts precision torch Tensor numpy ndarray string blobname precision recall torch Tensor numpy ndarray string blobname recall global_step int Global step value record num_thresholds int Number thresholds used draw curve walltime float Optional override default walltime time time seconds after epoch event see https github com tensorflow tensorboard blob master tensorboard plugins pr_curve README md torch _C _log_api_usage_once tensorboard logging add_pr_curve_raw _get_file_writer add_summary pr_curve_raw tag true_positive_counts false_positive_counts true_negative_counts false_negative_counts precision recall num_thresholds weights global_step walltime add_custom_scalars_multilinechart tags category= default title= untitled Shorthand creating multilinechart Similar ` ` add_custom_scalars ` ` only necessary argument tags Args tags list list tags have been used ` ` add_scalar ` ` Examples writer add_custom_scalars_multilinechart twse twse torch _C _log_api_usage_once tensorboard logging add_custom_scalars_multilinechart layout = category title Multiline tags _get_file_writer add_summary custom_scalars layout add_custom_scalars_marginchart tags category= default title= untitled Shorthand creating marginchart Similar ` ` add_custom_scalars ` ` only necessary argument tags which should have exactly elements Args tags list list tags have been used ` ` add_scalar ` ` Examples writer add_custom_scalars_marginchart twse twse twse torch _C _log_api_usage_once tensorboard logging add_custom_scalars_marginchart len tags = raise AssertionError f Expected tags got len tags layout = category title Margin tags _get_file_writer add_summary custom_scalars layout add_custom_scalars layout Create special chart collecting charts tags scalars NOTE This function can only called once each SummaryWriter object Because only provides metadata tensorboard function can called before after training loop Args layout dict categoryName charts where charts also dictionary chartName ListOfProperties The first element ListOfProperties chart s type one Multiline Margin second element should list containing tags you have used add_scalar function which will collected into new chart Examples layout = Taiwan twse Multiline twse twse USA dow Margin dow aaa dow bbb dow ccc nasdaq Margin nasdaq aaa nasdaq bbb nasdaq ccc writer add_custom_scalars layout torch _C _log_api_usage_once tensorboard logging add_custom_scalars _get_file_writer add_summary custom_scalars layout add_mesh tag vertices colors=None faces=None config_dict=None global_step=None walltime=None Add meshes D point clouds TensorBoard The visualization based Three js so allows users interact rendered object Besides basic definitions such vertices faces users can further provide camera parameter lighting condition etc Please check https threejs org docs index html#manual en introduction Creating-a-scene advanced usage Args tag str Data identifier vertices torch Tensor List D coordinates vertices colors torch Tensor Colors each vertex faces torch Tensor Indices vertices within each triangle Optional config_dict Dictionary ThreeJS classes names configuration global_step int Global step value record walltime float Optional override default walltime time time seconds after epoch event Shape vertices math ` B N ` batch number_of_vertices channels colors math ` B N ` The values should lie type ` uint ` type ` float ` faces math ` B N ` The values should lie number_of_vertices type ` uint ` Examples torch utils tensorboard SummaryWriter vertices_tensor = torch as_tensor - - - - - - dtype=torch float unsqueeze colors_tensor = torch as_tensor dtype=torch int unsqueeze faces_tensor = torch as_tensor dtype=torch int unsqueeze writer = SummaryWriter writer add_mesh my_mesh vertices=vertices_tensor colors=colors_tensor faces=faces_tensor writer close torch _C _log_api_usage_once tensorboard logging add_mesh _get_file_writer add_summary mesh tag vertices colors faces config_dict global_step walltime flush Flushes event file disk Call method make sure all pending events have been written disk all_writers None writer all_writers values writer flush close all_writers None ignore double close writer all_writers values writer flush writer close pyrefly ignore bad-assignment file_writer = all_writers = None __enter__ __exit__ exc_type exc_val exc_tb close