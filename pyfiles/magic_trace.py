Copyright c Facebook Inc its affiliates All rights reserved This source code licensed under BSD-style license found LICENSE file root directory source tree os signal subprocess collections abc Generator contextlib contextmanager contextmanager magic_trace output str = trace fxt magic_trace_cache str = tmp magic-trace - Generator None None None pid = os getpid os path exists magic_trace_cache print f Downloading magic_trace magic_trace_cache subprocess run wget -O magic_trace_cache -q https github com janestreet magic-trace releases download v magic-trace subprocess run chmod +x magic_trace_cache args = magic_trace_cache attach -pid str pid -o output p = subprocess Popen args stderr=subprocess PIPE encoding= utf- assert p stderr None while True x = p stderr readline print x Attached x break try yield finally p send_signal signal SIGINT r = p wait p stderr None print p stderr read p stderr close r = raise ValueError f magic_trace exited abnormally r