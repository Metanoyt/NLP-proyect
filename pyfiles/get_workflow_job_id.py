Helper get id currently running job GitHub Actions workflow GitHub does provide information workflow runs so we need figure out based what they do provide argparse json operator os re sys time urllib urllib parse typing Any Callable Optional urllib request Request urlopen parse_json_and_links conn Any - tuple Any dict str dict str str links = Extract links which GH uses pagination see https developer mozilla org en-US docs Web HTTP Headers Link Link conn headers elem re split conn headers Link try url params_ = elem split except ValueError continue url = urllib parse unquote url strip qparams = urllib parse parse_qs params_ strip separator= params = k v strip k v qparams items type v list len v params url = url rel params links params rel = params json load conn links fetch_url url str headers Optional dict str str = None reader Callable Any Any = lambda x x read retries Optional int = backoff_timeout float = - Any headers None headers = try urlopen Request url headers=headers conn reader conn except urllib error HTTPError err isinstance retries int float retries time sleep backoff_timeout fetch_url url headers=headers reader=reader retries=retries - backoff_timeout=backoff_timeout exception_message = Is github alright f Received status code err code when attempting retrieve url \n f err reason \n\nheaders= err headers raise RuntimeError exception_message err parse_args - Any parser = argparse ArgumentParser parser add_argument workflow_run_id help= The id workflow run should GITHUB_RUN_ID parser add_argument runner_name help= The name runner retrieve job id should RUNNER_NAME parser parse_args fetch_jobs url str headers dict str str - list dict str str response links = fetch_url url headers=headers reader=parse_json_and_links jobs = response jobs assert type jobs list while next links keys response links = fetch_url links next url headers=headers reader=parse_json_and_links jobs extend response jobs jobs Our strategy retrieve parent workflow run then filter its jobs RUNNER_NAME figure out which job we re currently running Why RUNNER_NAME Because s only thing uniquely identifies job within workflow GITHUB_JOB doesn t work corresponds job yaml id https bit ly e oI which has two problems It s present workflow job JSON object so we can t use filter It isn t unique matrix jobs job yaml id same all jobs matrix RUNNER_NAME other hand unique across pool runners Also since only one job can scheduled runner time we know looking RUNNER_NAME will uniquely identify job we re currently running find_job_id_name args Any - tuple str str From https docs github com en actions learn-github-actions environment-variables PYTORCH_REPO = os environ get GITHUB_REPOSITORY pytorch pytorch PYTORCH_GITHUB_API = f https api github com repos PYTORCH_REPO GITHUB_TOKEN = os environ GITHUB_TOKEN REQUEST_HEADERS = Accept application vnd github v +json Authorization token + GITHUB_TOKEN url = f PYTORCH_GITHUB_API actions runs args workflow_run_id jobs per_page= jobs = fetch_jobs url REQUEST_HEADERS Sort jobs list start time descending order We want get most recently scheduled job runner jobs sort key=operator itemgetter started_at reverse=True job jobs job runner_name == args runner_name job id job name raise RuntimeError f Can t find job id runner args runner_name set_output name str val Any - None print f Setting output name = val os getenv GITHUB_OUTPUT open str os getenv GITHUB_OUTPUT env print f name = val file=env print f set-output name= name val main - None args = parse_args try Get both job ID job name because we have already spent request here get job info job_id job_name = find_job_id_name args set_output job-id job_id set_output job-name job_name except Exception e print repr e file=sys stderr print f workflow- args workflow_run_id __name__ == __main__ main