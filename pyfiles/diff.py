usr bin env python Computes difference between measurements produced benchmark py argparse json numpy np load path open path f json load f main parser = argparse ArgumentParser description= PyTorch distributed benchmark diff parser add_argument file nargs= args = parser parse_args len args file = raise RuntimeError Must specify files diff ja = load args file jb = load args file keys = set ja keys &#124; set jb keys - benchmark_results print f s baseline s test s print f s - s - s key sorted keys va = str ja get key - vb = str jb get key - print f key + s va s vs vb s print ba = ja benchmark_results bb = jb benchmark_results ra rb zip ba bb ra model = rb model continue ra batch_size = rb batch_size continue model = ra model batch_size = int ra batch_size name = f model batch size batch_size print f Benchmark name Print header print print f s end= noqa E _ print f sec iter s ex sec s diff s end= noqa E print Print measurements i xa xb enumerate zip ra result rb result Ignore round without ddp i == continue Sanity check ignore number ranks equal len xa ranks = len xb ranks continue ngpus = len xa ranks ma = sorted xa measurements mb = sorted xb measurements print f ngpus d GPUs end= noqa E p va = np percentile ma p vb = np percentile mb p We re measuring time so lower better hence negation delta = - vb - va va print f p p d vb f s int batch_size vb d s delta + f end= noqa E print print __name__ == __main__ main