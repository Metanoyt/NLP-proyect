sys textwrap pathlib Path check path Check test file common issues pytest- pytorch conversion print path name print = len path name \n src = path read_text split \n num line enumerate src is_comment line continue module level test functions line startswith test report_violation line num header= Module-level test function test classes must inherit TestCase line startswith Test TestCase line report_violation line num header= Test does inherit TestCase last vestiges pytest-specific stuff pytest mark line report_violation line num header= pytest mark something part pytest xfail pytest skip pytest param part line report_violation line num header=f stray part textwrap dedent line startswith parametrize backtrack check nn = num nn range num - - ln = src nn Test ln hack large indent = likely inner len ln - len ln lstrip break report_violation line num off-class parametrize src nn - startswith instantiate_parametrized_tests report_violation line num f missing instantiation parametrized tests ln is_comment line textwrap dedent line startswith report_violation line lineno header print f line lineno header \n line \n __name__ == __main__ argv = sys argv len argv = raise ValueError Usage python check_tests_conform path file dir path = Path argv path is_dir run all files directory no subdirs this_path path glob test py breakpoint check this_path check path