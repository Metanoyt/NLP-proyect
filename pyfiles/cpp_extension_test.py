unittest benchmark_cpp_extension noqa F torch TestConsumeOp unittest TestCase test_jit_consume_op iters = foo x i range iters result = torch ops operator_benchmark _consume torch sum x result r = torch jit trace foo torch rand graph = str r graph occurrence = graph count aten sum x = torch rand value = r x assertEqual value torch sum x assertEqual occurrence iters test_jit_consume_op_for_list_input iters = foo x i range iters result = torch ops operator_benchmark _consume torch chunk x result r = torch jit trace foo torch rand graph = str r graph occurrence = graph count aten chunk x = torch rand value = r x assertTrue all torch allclose t t t t zip value torch chunk x assertEqual occurrence iters