Uploads new binary s updates its hash config file You ll need have appropriate credentials PyTorch AWS buckets see https boto amazonaws com v documentation api latest guide quickstart html#configuration how configure them argparse hashlib json logging os boto type ignore compute_file_sha path str - str Compute SHA hash file hex string If file doesn t exist empty string os path exists path hash = hashlib sha Open file binary mode hash open path rb f b f hash update b Return hash hexadecimal string hash hexdigest main - None parser = argparse ArgumentParser description= s binary updater fromfile_prefix_chars= parser add_argument -- config-json required=True help= path config json you trying update parser add_argument -- linter required=True help= name linter you re trying update parser add_argument -- platform required=True help= which platform you uploading binary parser add_argument -- file required=True help= file upload parser add_argument -- dry-run action= store_true help= set don t actually upload write hash args = parser parse_args logging basicConfig level=logging INFO config = json load open args config_json linter_config = config args linter args platform bucket = linter_config s _bucket object_name = linter_config object_name Upload file logging info Uploading file s s bucket s object name s args file bucket object_name args dry_run s _client = boto client s s _client upload_file args file bucket object_name Update hash repo hash_of_new_binary = compute_file_sha args file logging info Computed new hash binary s hash_of_new_binary linter_config hash = hash_of_new_binary config_dump = json dumps config indent= sort_keys=True logging info Writing out new config logging info config_dump args dry_run open args config_json w f f write config_dump __name__ == __main__ main