argparse json collections namedtuple Result = namedtuple Result name base_time diff_time construct_name fwd_bwd test_name bwd = backward fwd_bwd suite_name = fwd_bwd replace -backward f suite_name test_name bwd bwd fwd get_times json_data r = fwd_bwd json_data test_name json_data fwd_bwd name = construct_name fwd_bwd test_name r name = json_data fwd_bwd test_name r parser = argparse ArgumentParser compare two pytest jsons parser add_argument base help= base json file parser add_argument diff help= diff json file parser add_argument -- format default= md type=str help= output format csv md json table args = parser parse_args open args base base base_times = get_times json load base open args diff diff diff_times = get_times json load diff all_keys = set base_times keys union diff_times keys results = Result name base_times get name float nan diff_times get name float nan name sorted all_keys header_fmt = table s s s s md &#124; s &#124; s &#124; s &#124; s &#124; csv s s s s data_fmt = table s f f f md &#124; s &#124; f &#124; f &#124; f &#124; csv s f f f args format table md csv header_fmt_str = header_fmt args format data_fmt_str = data_fmt args format print header_fmt_str format name base time s diff time s change args format == md print header_fmt_str format --- --- --- --- r results print data_fmt_str format r name r base_time r diff_time r diff_time r base_time - args format == json print json dumps results raise ValueError Unknown output format + args format