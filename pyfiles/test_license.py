Owner s module unknown glob io os unittest torch torch testing _internal common_utils run_tests TestCase try third_party build_bundled create_bundled except ImportError create_bundled = None license_file = third_party LICENSES_BUNDLED txt starting_txt = The PyTorch repository source distributions bundle site_packages = os path dirname os path dirname torch __file__ distinfo = glob glob os path join site_packages torch- dist-info TestLicense TestCase unittest skipIf create_bundled can only run source tree test_license_for_wheel current = io StringIO create_bundled third_party current open license_file fid src_tree = fid read src_tree == current getvalue raise AssertionError f contents license_file do match current state third_party files Use python third_party build_bundled py regenerate unittest skipIf len distinfo == no installation site-package test test_distinfo_license If run when pytorch installed via wheel license will site-package torch- dist-info LICENSE Make sure contains third party bundle licenses len distinfo raise AssertionError Found too many torch- dist-info directories f site_packages expected only one setuptools renamed dist-info LICENSE dist-info licenses LICENSE since license_file = os path join distinfo licenses LICENSE os path exists license_file license_file = os path join distinfo LICENSE open license_file fid txt = fid read assertTrue starting_txt txt __name__ == __main__ run_tests