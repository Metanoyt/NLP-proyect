usr bin env python argparse logging os pandas pd torch _functorch benchmark_utils compute_utilization log = logging getLogger __name__ process chrome traces output pytorch profiler require json input file s name format model_name _chrome_trace_ json runtimes file should have format model_name runtime get_model_name filename Get model name file format model_name _chrome_trace_ json _ tail = os path split filename modelname = tail tail find _chrome_trace modelname get_total_length run_times_df modelname float run_times_df run_times_df name == modelname runtime main parser = argparse ArgumentParser group = parser add_mutually_exclusive_group required=True parser add_argument -- runtime -runf help= file name runtime file required=True group add_argument -- filename -f action= append help= filename json file process group add_argument -- folder -fd help= folder json files process args = parser parse_args args filename filenames = args filename args folder filenames = directory = args folder filename os listdir directory f = os path join directory filename os path isfile f f endswith json filenames append f print Please provide filename folder name print modelname GPU Utilization MM Conv time run_times_df = pd read_csv args runtime filename filenames try modelname = get_model_name filename total_length = get_total_length run_times_df modelname e utilization mm_conv_utilization = compute_utilization filenames total_length print f modelname utilization mm_conv_utilization except BaseException noqa B log exception s ERROR filename print f filename ERROR __name__ == __main__ main