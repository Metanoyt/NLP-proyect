Owner s oncall package deploy pathlib Path unittest skipIf torch package PackageImporter torch testing _internal common_utils IS_FBCODE IS_SANDCASTLE run_tests try common PackageTestCase except ImportError Support case where we run file directly common PackageTestCase packaging_directory = f Path __file__ parent package_bc TestLoadBCPackages PackageTestCase Tests checking loading has backwards compatibility skipIf IS_FBCODE IS_SANDCASTLE Tests use temporary files disabled fbcode test_load_bc_packages_nn_module Tests backwards compatible nn module importer = PackageImporter f packaging_directory test_nn_module pt importer load_pickle nn_module nn_module pkl skipIf IS_FBCODE IS_SANDCASTLE Tests use temporary files disabled fbcode test_load_bc_packages_torchscript_module Tests backwards compatible torchscript module importer = PackageImporter f packaging_directory test_torchscript_module pt importer load_pickle torchscript_module torchscript_module pkl skipIf IS_FBCODE IS_SANDCASTLE Tests use temporary files disabled fbcode test_load_bc_packages_fx_module Tests backwards compatible fx module importer = PackageImporter f packaging_directory test_fx_module pt importer load_pickle fx_module fx_module pkl __name__ == __main__ run_tests