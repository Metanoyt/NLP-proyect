usr bin env python Owner s oncall r p Copyright c Facebook Inc its affiliates All rights reserved This source code licensed under BSD-style license found LICENSE file root directory source tree argparse os pathlib Path parse_args parser = argparse ArgumentParser description= test script parser add_argument -- fail default=False action= store_true help= forces script throw RuntimeError file used assertions parser add_argument -- touch-file-dir -- touch_file_dir type=str help= dir touch file global rank filename parser parse_args main args = parse_args env_vars = LOCAL_RANK RANK GROUP_RANK ROLE_RANK ROLE_NAME LOCAL_WORLD_SIZE WORLD_SIZE ROLE_WORLD_SIZE MASTER_ADDR MASTER_PORT TORCHELASTIC_RESTART_COUNT TORCHELASTIC_MAX_RESTARTS TORCHELASTIC_RUN_ID OMP_NUM_THREADS TEST_SENTINEL_PARENT TORCHELASTIC_ERROR_FILE print Distributed env vars set agent env_var env_vars value = os environ env_var print f env_var = value args fail raise RuntimeError raising exception since -- fail flag set file = os path join args touch_file_dir os environ RANK Path file touch print f Success created file __name__ == __main__ main