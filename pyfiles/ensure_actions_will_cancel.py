usr bin env python sys pathlib Path yaml REPO_ROOT = Path __file__ resolve parents WORKFLOWS = REPO_ROOT github workflows EXPECTED_GROUP_PREFIX = $ github workflow -$ github event pull_request number &#124; &#124; github sha EXPECTED_GROUP = EXPECTED_GROUP_PREFIX + -$ github event_name == workflow_dispatch should_check filename Path - bool open filename f content = f read data = yaml safe_load content = data get data get True pull_request __name__ == __main__ errors_found = False files = f f WORKFLOWS glob yml should_check f names = set filename files open filename f data = yaml safe_load f name = data get name name None name names print ERROR duplicate workflow name name file=sys stderr errors_found = True names add name actual = data get concurrency filename name == create_release yml actual get group startswith EXPECTED_GROUP_PREFIX print f concurrency incorrect found filename relative_to REPO_ROOT file=sys stderr print f concurrency group should start EXPECTED_GROUP_PREFIX found actual get group None file=sys stderr errors_found = True actual get group startswith EXPECTED_GROUP print f concurrency incorrect found filename relative_to REPO_ROOT file=sys stderr print f concurrency group should start EXPECTED_GROUP found actual get group None file=sys stderr errors_found = True actual get cancel-in-progress False print f concurrency incorrect found filename relative_to REPO_ROOT file=sys stderr print f concurrency cancel-in-progress should True found actual get cancel-in-progress None file=sys stderr errors_found sys exit