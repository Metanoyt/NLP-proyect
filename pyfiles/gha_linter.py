usr bin env python TODO __future__ annotations argparse json os path enum Enum typing NamedTuple ruamel yaml type ignore LintSeverity str Enum ERROR = error WARNING = warning ADVICE = advice DISABLED = disabled LintMessage NamedTuple path str &#124; None line int &#124; None char int &#124; None code str severity LintSeverity name str original str &#124; None replacement str &#124; None description str &#124; None __name__ == __main__ parser = argparse ArgumentParser description= github actions linter fromfile_prefix_chars= parser add_argument filenames nargs= + help= paths lint args = parser parse_args fn args filenames open fn f contents = f read yaml = ruamel yaml YAML type ignore attr-defined try r = yaml load contents except Exception err msg = LintMessage path=None line=None char=None code= GHA severity=LintSeverity ERROR name= YAML load failure original=None replacement=None description=f Failed due err __class__ __name__ \n err print json dumps msg _asdict flush=True continue job_name job r get jobs items This filter flexible idea avoid catching all random label jobs don t need secrets TODO binary might good have too s lot they re autogenerated too uses = os path basename job get uses build uses test uses binary uses job get secrets = inherit desc = missing secrets inherit field job get secrets None desc = has secrets field which standard form secrets inherit msg = LintMessage path=fn line=job lc line char=None code= GHA severity=LintSeverity ERROR name= missing secrets inherit original=None replacement=None description= f GitHub actions job job_name desc print json dumps msg _asdict flush=True