Owner s module onnx Unit tests internal registration wrapper module collections abc Sequence torch onnx errors torch onnx _internal torchscript_exporter registration torch testing _internal common_utils common_utils instantiate_parametrized_tests TestGlobalHelpers common_utils TestCase common_utils parametrize available_opsets target expected None New op added None None None Ops registered opset found fallback when target = test_dispatch_opset_version_returns_correct_version available_opsets Sequence int target int expected int actual = registration _dispatch_opset_version target available_opsets assertEqual actual expected TestOverrideDict common_utils TestCase setUp override_dict registration OverrideDict str int = registration OverrideDict test_get_item_returns_base_value_when_no_override override_dict set_base override_dict set_base b assertEqual override_dict assertEqual override_dict b assertEqual len override_dict test_get_item_returns_overridden_value_when_override override_dict set_base override_dict set_base b override_dict override override_dict override c assertEqual override_dict assertEqual override_dict b assertEqual override_dict c assertEqual len override_dict test_get_item_raises_key_error_when_not_found override_dict set_base assertRaises KeyError override_dict nonexistent_key test_get_returns_overridden_value_when_override override_dict set_base override_dict set_base b override_dict override override_dict override c assertEqual override_dict get assertEqual override_dict get b assertEqual override_dict get c assertEqual len override_dict test_get_returns_none_when_not_found override_dict set_base assertEqual override_dict get nonexistent_key None test_in_base_returns_true_for_base_value override_dict set_base override_dict set_base b override_dict override override_dict override c assertIn override_dict assertIn b override_dict assertIn c override_dict assertTrue override_dict in_base assertTrue override_dict in_base b assertFalse override_dict in_base c assertFalse override_dict in_base nonexistent_key test_overridden_returns_true_for_overridden_value override_dict set_base override_dict set_base b override_dict override override_dict override c assertTrue override_dict overridden assertFalse override_dict overridden b assertTrue override_dict overridden c assertFalse override_dict overridden nonexistent_key test_remove_override_removes_overridden_value override_dict set_base override_dict set_base b override_dict override override_dict override c assertEqual override_dict assertEqual override_dict c override_dict remove_override override_dict remove_override c assertEqual override_dict assertEqual override_dict get c None assertFalse override_dict overridden assertFalse override_dict overridden c test_remove_override_removes_overridden_key override_dict override assertEqual override_dict assertEqual len override_dict override_dict remove_override assertEqual len override_dict assertNotIn override_dict test_overridden_key_precedes_base_key_regardless_of_insert_order override_dict set_base override_dict override override_dict set_base assertEqual override_dict assertEqual len override_dict test_bool_is_true_when_not_empty override_dict fail OverrideDict should false when empty override_dict override override_dict fail OverrideDict should true when empty override_dict set_base override_dict fail OverrideDict should true when empty override_dict remove_override override_dict fail OverrideDict should true when empty TestRegistrationDecorators common_utils TestCase tearDown - None registration registry _registry pop test test_op None test_onnx_symbolic_registers_function assertFalse registration registry is_registered_op test test_op registration onnx_symbolic test test_op opset= test g x g op test x assertTrue registration registry is_registered_op test test_op function_group = registration registry get_function_group test test_op assert function_group None assertEqual function_group get test test_onnx_symbolic_registers_function_applied_decorator_when_provided wrapper_called = False decorator func wrapper args kwargs nonlocal wrapper_called wrapper_called = True func args kwargs wrapper registration onnx_symbolic test test_op opset= decorate= decorator test function_group = registration registry get_function_group test test_op assert function_group None registered_function = function_group assertFalse wrapper_called registered_function assertTrue wrapper_called test_onnx_symbolic_raises_warning_when_overriding_function assertFalse registration registry is_registered_op test test_op registration onnx_symbolic test test_op opset= test assertWarnsRegex errors OnnxExporterWarning Symbolic function test test_op already registered registration onnx_symbolic test test_op opset= test test_custom_onnx_symbolic_registers_custom_function assertFalse registration registry is_registered_op test test_op registration custom_onnx_symbolic test test_op opset= test g x g op test x assertTrue registration registry is_registered_op test test_op function_group = registration registry get_function_group test test_op assert function_group None assertEqual function_group get test test_custom_onnx_symbolic_overrides_existing_function assertFalse registration registry is_registered_op test test_op registration onnx_symbolic test test_op opset= test_original original assertTrue registration registry is_registered_op test test_op registration custom_onnx_symbolic test test_op opset= test_custom custom function_group = registration registry get_function_group test test_op assert function_group None assertEqual function_group get test_custom __name__ == __main__ common_utils run_tests