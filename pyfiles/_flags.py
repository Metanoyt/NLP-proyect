Internal flags ONNX export __future__ annotations functools typing TYPE_CHECKING TypeVar typing_extensions ParamSpec TYPE_CHECKING collections abc Callable _is_onnx_exporting = False Use ParamSpec preserve parameter types instead erasing Any _P = ParamSpec _P _R = TypeVar _R set_onnx_exporting_flag func Callable _P _R - Callable _P _R functools wraps func wrapper args _P args kwargs _P kwargs - _R global _is_onnx_exporting _is_onnx_exporting = True try func args kwargs finally Ensure resets even exception occurs _is_onnx_exporting = False wrapper