usr bin env python Verify possible round-trip native_functions yaml via ruamel under some configuration Keeping native_functions yaml consistent way allows us run codemods file using ruamel without introducing line noise Note we don t want normalize YAML file would lots spurious lint failures Anything ruamel understands how roundtrip e g whitespace comments OK ruamel bit picky about inconsistent indentation so you will have indent your file properly Also you working changing syntax native_functions yaml you may find you want use some format what ruamel prefers If so OK modify script instead reformatting native_functions yaml -- point simply make sure there some configuration ruamel can round trip YAML prescriptive about difflib sys io StringIO pathlib Path ruamel yaml type ignore fn base str - str str base Path aten src ATen native native_functions yaml open Path __file__ parents fn f contents = f read yaml = ruamel yaml YAML type ignore attr-defined yaml preserve_quotes = True type ignore assignment yaml width = type ignore assignment yaml boolean_representation = False True type ignore attr-defined r = yaml load contents Cuz ruamel s author intentionally didn t include conversion string https stackoverflow com questions best-way-to-use-ruamel-yaml-to-dump-to-string-not-to-stream string_stream = StringIO yaml dump r string_stream new_contents = string_stream getvalue string_stream close contents = new_contents print \ ## LINT FAILURE native_functions yaml ## native_functions yaml failed lint please apply diff below fix lint If you think error please see github scripts lint_native_functions py file=sys stderr sys stdout writelines difflib unified_diff contents splitlines True new_contents splitlines True fn fn b sys exit