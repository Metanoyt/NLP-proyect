__future__ annotations argparse json os pathlib Path tempfile TemporaryDirectory typing Any tools stats upload_stats_lib download_s _artifacts upload_workflow_stats_to_s get_sccache_stats workflow_run_id int workflow_run_attempt int - list dict str Any TemporaryDirectory temp_dir print Using temporary directory temp_dir os chdir temp_dir Download extract all reports both GHA S download_s _artifacts sccache-stats workflow_run_id workflow_run_attempt stats_jsons = json_file Path glob json open json_file f stats_jsons append json load f stats_jsons __name__ == __main__ parser = argparse ArgumentParser description= Upload test stats s parser add_argument -- workflow-run-id type=int required=True help= id workflow get artifacts parser add_argument -- workflow-run-attempt type=int required=True help= which retry workflow args = parser parse_args stats = get_sccache_stats args workflow_run_id args workflow_run_attempt upload_workflow_stats_to_s args workflow_run_id args workflow_run_attempt sccache_stats stats