__future__ annotations sys unittest pathlib Path typing Any REPO_ROOT = Path __file__ resolve parents sys path append str REPO_ROOT tools testing target_determination heuristics interface interface tools testing test_run TestRun sys path remove str REPO_ROOT TestTD unittest TestCase assert_test_scores_almost_equal d dict TestRun float d dict TestRun float - None Check dictionaries same except floating point errors assertEqual set d keys set d keys k v d items assertAlmostEqual v d k msg=f k v = d k make_heuristic classname str - Any Create dummy heuristic Heuristic interface HeuristicInterface get_prediction_confidence tests list str - interface TestPrioritizations Return junk interface TestPrioritizations type classname Heuristic TestTestPrioritizations TestTD test_init_none - None tests = test_a test_b test_prioritizations = interface TestPrioritizations tests assertSetEqual test_prioritizations _original_tests set tests assertDictEqual test_prioritizations _test_scores TestRun test_a TestRun test_b test_init_set_scores_full_files - None tests = test_a test_b test_prioritizations = interface TestPrioritizations tests TestRun test_a TestRun test_b assertSetEqual test_prioritizations _original_tests set tests assertDictEqual test_prioritizations _test_scores TestRun test_a TestRun test_b test_init_set_scores_some_full_files - None tests = test_a test_b test_prioritizations = interface TestPrioritizations tests TestRun test_a assertSetEqual test_prioritizations _original_tests set tests assertDictEqual test_prioritizations _test_scores TestRun test_a TestRun test_b test_init_set_scores_classes - None tests = test_a test_b test_prioritizations = interface TestPrioritizations tests TestRun test_a included= TestA assertSetEqual test_prioritizations _original_tests set tests assertDictEqual test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a excluded= TestA TestRun test_b test_init_set_scores_other_class_naming_convention - None tests = test_a test_b test_prioritizations = interface TestPrioritizations tests TestRun test_a TestA assertSetEqual test_prioritizations _original_tests set tests assertDictEqual test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a excluded= TestA TestRun test_b test_set_test_score_full_class - None tests = test_a test_b test_prioritizations = interface TestPrioritizations tests test_prioritizations set_test_score TestRun test_a assertSetEqual test_prioritizations _original_tests set tests assertDictEqual test_prioritizations _test_scores TestRun test_a TestRun test_b test_set_test_score_mix - None tests = test_a test_b test_prioritizations = interface TestPrioritizations tests TestRun test_b - test_prioritizations set_test_score TestRun test_a test_prioritizations set_test_score TestRun test_a TestA test_prioritizations set_test_score TestRun test_a TestB test_prioritizations set_test_score TestRun test_a included= TestC assertSetEqual test_prioritizations _original_tests set tests assertDictEqual test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a excluded= TestA TestB TestC TestRun test_b - test_prioritizations set_test_score TestRun test_a included= TestA TestB assertDictEqual test_prioritizations _test_scores TestRun test_a included= TestA TestB TestRun test_a included= TestC TestRun test_a excluded= TestA TestB TestC TestRun test_b - test_prioritizations set_test_score TestRun test_a excluded= TestA TestB assertDictEqual test_prioritizations _test_scores TestRun test_a included= TestA TestB TestRun test_a excluded= TestA TestB TestRun test_b - test_prioritizations set_test_score TestRun test_a included= TestC assertDictEqual test_prioritizations _test_scores TestRun test_a included= TestA TestB TestRun test_a excluded= TestA TestB TestC TestRun test_a included= TestC TestRun test_b - test_prioritizations set_test_score TestRun test_a excluded= TestD assertDictEqual test_prioritizations _test_scores TestRun test_a excluded= TestD TestRun test_a included= TestD TestRun test_b - assertSetEqual test_prioritizations _original_tests set tests test_prioritizations validate test_add_test_score_mix - None tests = test_a test_b test_prioritizations = interface TestPrioritizations tests TestRun test_b - test_prioritizations add_test_score TestRun test_a test_prioritizations add_test_score TestRun test_a TestA test_prioritizations add_test_score TestRun test_a TestB test_prioritizations add_test_score TestRun test_a included= TestC assertSetEqual test_prioritizations _original_tests set tests assert_test_scores_almost_equal test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a excluded= TestA TestB TestC TestRun test_b - test_prioritizations add_test_score TestRun test_a included= TestA TestB assert_test_scores_almost_equal test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a excluded= TestA TestB TestC TestRun test_b - test_prioritizations add_test_score TestRun test_a excluded= TestA TestB assert_test_scores_almost_equal test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a excluded= TestA TestB TestC TestRun test_b - test_prioritizations add_test_score TestRun test_a included= TestC assert_test_scores_almost_equal test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a excluded= TestA TestB TestC TestRun test_b - test_prioritizations add_test_score TestRun test_a excluded= TestD assert_test_scores_almost_equal test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a included= TestD TestRun test_a excluded= TestA TestB TestC TestD TestRun test_b - test_prioritizations add_test_score TestRun test_a excluded= TestD TestC assert_test_scores_almost_equal test_prioritizations _test_scores TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a included= TestD TestRun test_a excluded= TestA TestB TestC TestD TestRun test_b - assertSetEqual test_prioritizations _original_tests set tests test_prioritizations validate TestAggregatedHeuristics TestTD check tests list str test_prioritizations list dict TestRun float expected dict TestRun float - None aggregated_heuristics = interface AggregatedHeuristics tests i test_prioritization enumerate test_prioritizations heuristic = make_heuristic f H i aggregated_heuristics add_heuristic_results heuristic interface TestPrioritizations tests test_prioritization final_prioritzations = aggregated_heuristics get_aggregated_priorities assert_test_scores_almost_equal final_prioritzations _test_scores expected test_get_aggregated_priorities_mix_ - None tests = test_a test_b test_c check tests TestRun test_a TestRun test_a TestA TestRun test_c TestRun test_a excluded= TestA TestRun test_a included= TestA TestRun test_b TestRun test_c test_get_aggregated_priorities_mix_ - None tests = test_a test_b test_c check tests TestRun test_a included= TestC TestRun test_b TestRun test_a excluded= TestA TestB TestC TestRun test_a TestA TestRun test_b TestB TestRun test_a TestB TestRun test_a excluded= TestA TestB TestRun test_c TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a excluded= TestA TestB TestC TestRun test_b included= TestB TestRun test_b excluded= TestB TestRun test_c test_get_aggregated_priorities_mix_ - None tests = test_a check tests TestRun test_a included= TestA TestRun test_a included= TestC TestRun test_a excluded= TestA TestB TestC TestRun test_a excluded= TestD TestRun test_a included= TestC TestRun test_a included= TestB TestC TestRun test_a included= TestC TestRun test_a included= TestD TestRun test_a TestRun test_a included= TestA TestRun test_a included= TestB TestRun test_a included= TestC TestRun test_a included= TestD TestRun test_a excluded= TestA TestB TestC TestD TestAggregatedHeuristicsTestStats TestTD test_get_test_stats_with_whole_tests - None maxDiff = None tests = test test test test test heuristic = interface TestPrioritizations tests TestRun test TestRun test heuristic = interface TestPrioritizations tests TestRun test aggregator = interface AggregatedHeuristics tests aggregator add_heuristic_results make_heuristic H heuristic aggregator add_heuristic_results make_heuristic H heuristic expected_test _stats = test_name test test_filters heuristics position score heuristic_name H trial_mode False position score heuristic_name H trial_mode False aggregated position score aggregated_trial position score test _stats = aggregator get_test_stats TestRun test assertDictEqual test _stats expected_test _stats test_get_test_stats_only_contains_allowed_types - None maxDiff = None tests = test test test test test heuristic = interface TestPrioritizations tests TestRun test TestRun test heuristic = interface TestPrioritizations tests TestRun test classA aggregator = interface AggregatedHeuristics tests aggregator add_heuristic_results make_heuristic H heuristic aggregator add_heuristic_results make_heuristic H heuristic stats = aggregator get_test_stats TestRun test stats = aggregator get_test_stats TestRun test classA assert_valid_dict dict_contents dict str Any - None key value dict_contents items assertTrue isinstance key str assertTrue isinstance value str float int list dict f value str float dict isinstance value dict assert_valid_dict value isinstance value list item value assert_valid_dict item assert_valid_dict stats assert_valid_dict stats test_get_test_stats_gets_rank_for_test_classes - None maxDiff = None tests = test test test test test heuristic = interface TestPrioritizations tests TestRun test TestRun test heuristic = interface TestPrioritizations tests TestRun test classA aggregator = interface AggregatedHeuristics tests aggregator add_heuristic_results make_heuristic H heuristic aggregator add_heuristic_results make_heuristic H heuristic stats_inclusive = aggregator get_test_stats TestRun test included= classA stats_exclusive = aggregator get_test_stats TestRun test excluded= classA expected_inclusive = test_name test test_filters classA heuristics position score heuristic_name H trial_mode False position score heuristic_name H trial_mode False aggregated position score aggregated_trial position score expected_exclusive = test_name test test_filters classA heuristics position score heuristic_name H trial_mode False position score heuristic_name H trial_mode False aggregated position score aggregated_trial position score assertDictEqual stats_inclusive expected_inclusive assertDictEqual stats_exclusive expected_exclusive test_get_test_stats_works_with_class_granularity_heuristics - None tests = test test test test test heuristic = interface TestPrioritizations tests TestRun test heuristic = interface TestPrioritizations tests TestRun test TestFooClass aggregator = interface AggregatedHeuristics tests aggregator add_heuristic_results make_heuristic H heuristic aggregator add_heuristic_results make_heuristic H heuristic These should throw error aggregator get_test_stats TestRun test TestFooClass aggregator get_test_stats TestRun test TestJsonParsing TestTD test_json_parsing_matches_TestPrioritizations - None tests = test test test test test tp = interface TestPrioritizations tests TestRun test included= ClassA TestRun test excluded= ClassA TestRun test TestRun test tp_json = tp to_json tp_json_to_tp = interface TestPrioritizations from_json tp_json assertSetEqual tp _original_tests tp_json_to_tp _original_tests assertDictEqual tp _test_scores tp_json_to_tp _test_scores test_json_parsing_matches_TestRun - None testrun = TestRun test included= classA classB testrun_json = testrun to_json testrun_json_to_test = TestRun from_json testrun_json assertTrue testrun == testrun_json_to_test __name__ == __main__ unittest main