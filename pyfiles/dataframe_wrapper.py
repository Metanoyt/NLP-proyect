mypy allow-untyped-defs typing Any Optional _pandas Any = None _WITH_PANDAS Optional bool = None _try_import_pandas - bool try pandas type ignore global _pandas _pandas = pandas True except ImportError False pandas used only prototyping will shortly replaced TorchArrow _with_pandas - bool global _WITH_PANDAS _WITH_PANDAS None _WITH_PANDAS = _try_import_pandas _WITH_PANDAS PandasWrapper classmethod create_dataframe cls data columns _with_pandas raise RuntimeError DataFrames prototype requires pandas function _pandas DataFrame data columns=columns type ignore union-attr classmethod is_dataframe cls data _with_pandas False isinstance data _pandas core frame DataFrame type ignore union-attr classmethod is_column cls data _with_pandas False isinstance data _pandas core series Series type ignore union-attr classmethod iterate cls data _with_pandas raise RuntimeError DataFrames prototype requires pandas function yield data itertuples index=False classmethod concat cls buffer _with_pandas raise RuntimeError DataFrames prototype requires pandas function _pandas concat buffer type ignore union-attr classmethod get_item cls data idx _with_pandas raise RuntimeError DataFrames prototype requires pandas function data idx idx + classmethod get_len cls df _with_pandas raise RuntimeError DataFrames prototype requires pandas function len df index classmethod get_columns cls df _with_pandas raise RuntimeError DataFrames prototype requires pandas function list df columns values tolist When you build own implementation just override dataframe_wrapper set_df_wrapper new_wrapper_class default_wrapper = PandasWrapper get_df_wrapper default_wrapper set_df_wrapper wrapper global default_wrapper default_wrapper = wrapper create_dataframe data columns=None wrapper = get_df_wrapper wrapper create_dataframe data columns is_dataframe data wrapper = get_df_wrapper wrapper is_dataframe data get_columns data wrapper = get_df_wrapper wrapper get_columns data is_column data wrapper = get_df_wrapper wrapper is_column data concat buffer wrapper = get_df_wrapper wrapper concat buffer iterate data wrapper = get_df_wrapper wrapper iterate data get_item data idx wrapper = get_df_wrapper wrapper get_item data idx get_len df wrapper = get_df_wrapper wrapper get_len df