Owner s oncall package deploy io BytesIO torch package PackageExporter PackageImporter sys_importer torch testing _internal common_utils run_tests try common PackageTestCase except ImportError Support case where we run file directly common PackageTestCase TestRepackage PackageTestCase Tests repackaging test_repackage_import_indirectly_via_parent_module package_d imports_directly ImportsDirectlyFromSubSubPackage package_d imports_indirectly ImportsIndirectlyFromSubPackage model_a = ImportsDirectlyFromSubSubPackage buffer = BytesIO PackageExporter buffer pe pe intern pe save_pickle default model py model_a buffer seek pi = PackageImporter buffer pi load_pickle default model py model_b = ImportsIndirectlyFromSubPackage buffer = BytesIO PackageExporter buffer importer= pi sys_importer pe pe intern pe save_pickle default model_b py model_b __name__ == __main__ run_tests