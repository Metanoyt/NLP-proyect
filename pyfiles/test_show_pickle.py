Owner s oncall mobile io tempfile unittest torch torch utils show_pickle torch testing _internal common_utils IS_WINDOWS run_tests TestCase TestShowPickle TestCase unittest skipIf IS_WINDOWS Can t re-open temp file Windows test_scripted_model MyCoolModule torch nn Module __init__ weight super __init__ weight = weight forward x x weight m = torch jit script MyCoolModule torch tensor tempfile NamedTemporaryFile tmp torch jit save m tmp tmp flush buf = io StringIO torch utils show_pickle main tmp name + data pkl output_stream=buf output = buf getvalue assertRegex output MyCoolModule assertRegex output weight __name__ == __main__ run_tests