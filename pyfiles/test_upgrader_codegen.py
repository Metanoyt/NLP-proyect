Owner s oncall mobile os tempfile pathlib Path torch jit generate_bytecode generate_upgraders_bytecode torch testing _internal common_utils run_tests TestCase torchgen operator_versions gen_mobile_upgraders sort_upgrader write_cpp pytorch_caffe _dir = Path __file__ resolve parents TestLiteScriptModule TestCase test_generate_bytecode upgrader_list = generate_upgraders_bytecode sorted_upgrader_list = sort_upgrader upgrader_list upgrader_mobile_cpp_path = pytorch_caffe _dir torch csrc jit mobile upgrader_mobile cpp tempfile TemporaryDirectory tmpdirname write_cpp tmpdirname sorted_upgrader_list open os path join tmpdirname upgrader_mobile cpp file_name actual_output = line strip line file_name line open str upgrader_mobile_cpp_path file_name expect_output = line strip line file_name line actual_output_filtered = list filter lambda token len token = actual_output expect_output_filtered = list filter lambda token len token = expect_output assertEqual actual_output_filtered expect_output_filtered __name__ == __main__ run_tests