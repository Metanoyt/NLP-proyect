unittest pass_manager inplace_wrapper PassManager these_before_those_pass_constraint this_before_that_pass_constraint TestPassManager unittest TestCase test_pass_manager_builder - None passes = lambda x x _ range pm = PassManager passes pm validate test_this_before_that_pass_constraint - None passes = lambda x x _ range pm = PassManager passes add unfulfillable constraint pm add_constraint this_before_that_pass_constraint passes - passes assertRaises RuntimeError pm validate test_these_before_those_pass_constraint - None passes = lambda x x _ range constraint = these_before_those_pass_constraint passes - passes pm = PassManager inplace_wrapper p p passes add unfulfillable constraint pm add_constraint constraint assertRaises RuntimeError pm validate test_two_pass_managers - None Make sure we can construct PassManager twice share any state between them passes = lambda x x _ range constraint = these_before_those_pass_constraint passes passes pm = PassManager p passes pm add_pass p pm add_constraint constraint output = pm assertEqual output passes = lambda x x _ range constraint = these_before_those_pass_constraint passes passes pm = PassManager p passes pm add_pass p pm add_constraint constraint output = pm assertEqual output