Owner s oncall jit os re tempfile unittest torch _lazy torch _lazy ts_backend torch nn nn torch testing _internal common_utils IS_WINDOWS run_tests TestCase torch _lazy ts_backend init unittest skipIf IS_WINDOWS To fixed DebugUtilTest TestCase _run_linear device = lazy model = nn Linear device output = model torch randn device noqa F torch _lazy mark_step test_get_python_frames We only care about first Python Stacktrace part saved graph However we cannot save whole stack comparison given depends lot things partial_graph = r Python Stacktrace r mark_step \ _lazy __init__ py - +\ r _run_linear \ lazy test_debug_util py - +\ r test_get_python_frames \ lazy test_debug_util py - +\ tempfile NamedTemporaryFile mode= r+ encoding= utf- graph_file os environ LTC_SAVE_TENSORS_FILE = graph_file name _run_linear file = graph_file read re search partial_graph file re DOTALL None print file assertTrue False __name__ == __main__ run_tests