This file contains list tests known fail under Dynamo We generate xFailIfTorchDynamo all tests ` dynamo_expected_failures ` We generate skipIfTorchDynamo all tests ` dynamo_skips ` We generate runWithoutCompiledAutograd all tests ` compiled_autograd_skips ` For easier-than-manual way generating updating these lists see scripts compile_tests update_failures py If you re adding new test s failing PYTORCH_TEST_WITH_DYNAMO= either add appropriate decorators your test add skips them via test dynamo_skips test dynamo_expected_failures These exactly unittest expectedFailure unittest skip We ll always execute test then suppress signal necessary If your tests crashes slow please use skipIfTorchDynamo instead The expected failure skip files located test dynamo_skips test dynamo_expected_failures They re individual files rather than list so git will merge changes easier logging os sys typing Optional find_test_dir - Optional str Find path dynamo expected failure skip files os path abspath basename dirname exists join normpath sys platform == win None Check relative file local build test_dir = normpath join dirname abspath __file__ test exists join test_dir dynamo_expected_failures test_dir Check relative __main__ installed builds relative test file main = sys modules __main__ file = getattr main __file__ None file None Generated files do have module __file__ None test_dir = dirname abspath file while dirname test_dir = test_dir basename test_dir == test exists join test_dir dynamo_expected_failures test_dir test_dir = dirname test_dir Not found None test_dir = find_test_dir test_dir logger = logging getLogger __name__ logger warning test dynamo_expected_failures directory found - known dynamo errors won t skipped Tests run without strict mode PYTORCH_TEST_WITH_INDUCTOR= Please don t add anything list FIXME_inductor_non_strict = test_modules test_ops test_ops_gradients test_torch We generate unittest expectedFailure all following tests when run under PYTORCH_TEST_WITH_DYNAMO= see NOTE dynamo_test_failures py more details This lists exists so we can more easily add large numbers failing tests test_dir None dynamo_expected_failures = set dynamo_skips = set inductor_expected_failures = set inductor_skips = set compiled_autograd_skips = set dynamo_failures_directory = os path join test_dir dynamo_expected_failures dynamo_skips_directory = os path join test_dir dynamo_skips dynamo_expected_failures = set os listdir dynamo_failures_directory dynamo_skips = set os listdir dynamo_skips_directory inductor_failures_directory = os path join test_dir inductor_expected_failures inductor_skips_directory = os path join test_dir inductor_skips inductor_expected_failures = set os listdir inductor_failures_directory inductor_skips = set os listdir inductor_skips_directory compiled_autograd_skips_directory = os path join test_dir compiled_autograd_skips compiled_autograd_skips = set os listdir compiled_autograd_skips_directory TODO due case sensitivity problems now list these files hand extra_dynamo_skips = TestProxyTensorOpInfoCPU test_make_fx_exhaustive_T_cpu_float TestProxyTensorOpInfoCPU test_make_fx_exhaustive_t_cpu_float TestProxyTensorOpInfoCPU test_make_fx_fake_exhaustive_T_cpu_float TestProxyTensorOpInfoCPU test_make_fx_fake_exhaustive_t_cpu_float TestProxyTensorOpInfoCPU test_make_fx_symbolic_exhaustive_T_cpu_float TestProxyTensorOpInfoCPU test_make_fx_symbolic_exhaustive_t_cpu_float TestProxyTensorOpInfoCPU test_make_fx_symbolic_exhaustive_inplace_T_cpu_float TestProxyTensorOpInfoCPU test_make_fx_symbolic_exhaustive_inplace_t_cpu_float TestProxyTensorOpInfoCPU test_make_fx_symbolic_exhaustive_out_T_cpu_float TestProxyTensorOpInfoCPU test_make_fx_symbolic_exhaustive_out_t_cpu_float dynamo_skips = dynamo_skips union extra_dynamo_skips verify some invariants test dynamo_expected_failures &#124; dynamo_skips &#124; inductor_expected_failures &#124; inductor_skips len test split = raise AssertionError f Invalid test name test dynamo_intersection = dynamo_expected_failures intersection dynamo_skips len dynamo_intersection raise AssertionError there should no overlap between dynamo_expected_failures dynamo_skips got + str dynamo_intersection inductor_intersection = inductor_expected_failures intersection inductor_skips len inductor_intersection raise AssertionError there should no overlap between inductor_expected_failures inductor_skips got + str inductor_intersection