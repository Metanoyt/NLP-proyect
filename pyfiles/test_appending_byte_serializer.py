Owner s module inductor dataclasses torch testing _internal common_utils TestCase torch utils _appending_byte_serializer AppendingByteSerializer BytesReader BytesWriter TestAppendingByteSerializer TestCase test_write_and_read_int - None int_serializer writer BytesWriter i int - None writer write_uint i int_deserializer reader BytesReader - int reader read_uint s = AppendingByteSerializer serialize_fn=int_serializer data = s extend data assertListEqual data AppendingByteSerializer to_list s to_bytes deserialize_fn=int_deserializer data = s extend data assertListEqual data + data AppendingByteSerializer to_list s to_bytes deserialize_fn=int_deserializer test_write_and_read_class - None dataclasses dataclass frozen=True eq=True Foo x int y str z bytes staticmethod serialize writer BytesWriter cls Foo - None writer write_uint cls x writer write_str cls y writer write_bytes cls z staticmethod deserialize reader BytesReader - Foo x = reader read_uint y = reader read_str z = reader read_bytes Foo x y z = Foo ok bytes b = Foo lol bytes s = AppendingByteSerializer serialize_fn=Foo serialize s append assertListEqual AppendingByteSerializer to_list s to_bytes deserialize_fn=Foo deserialize s append b assertListEqual b AppendingByteSerializer to_list s to_bytes deserialize_fn=Foo deserialize test_checksum - None writer = BytesWriter writer write_str test b = writer to_bytes b = bytearray b b = b \x b = bytes b assertRaisesRegex RuntimeError r Bytes object corrupted checksum does match BytesReader b __name__ == __main__ torch _inductor test_case run_tests run_tests