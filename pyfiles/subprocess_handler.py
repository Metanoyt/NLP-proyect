usr bin env python Copyright c Facebook Inc its affiliates All rights reserved This source code licensed under BSD-style license found LICENSE file root directory source tree os signal sys subprocess Popen typing Any Optional torch numa binding maybe_wrap_command_args_with_numa_binding NumaOptions __all__ = SubprocessHandler IS_WINDOWS = sys platform == win _get_default_signal - signal Signals Get default termination signal SIGTERM unix CTRL_C_EVENT windows IS_WINDOWS signal CTRL_C_EVENT type ignore attr-defined noqa F signal SIGTERM SubprocessHandler Convenience wrapper around python s ` ` subprocess Popen ` ` Keeps track meta-objects associated process e g stdout stderr redirect fds __init__ entrypoint str args tuple env dict str str stdout Optional str stderr Optional str local_rank_id int numa_options Optional NumaOptions _stdout = open stdout w stdout None _stderr = open stderr w stderr None inherit parent environment vars env_vars = os environ copy env_vars update env args_str = entrypoint str e e args args_str = maybe_wrap_command_args_with_numa_binding args_str gpu_index=local_rank_id numa_options=numa_options local_rank_id = local_rank_id proc Popen = _popen args_str env_vars _popen args tuple env dict str str - Popen kwargs dict str Any = IS_WINDOWS kwargs start_new_session = True Popen pyre-fixme Expected ` Union typing Sequence Union _PathLike bytes _PathLike str bytes str bytes str ` st param got ` Tuple str Tuple Any ` args=args env=env stdout=self _stdout stderr=self _stderr kwargs close death_sig Optional signal Signals = None - None death_sig death_sig = _get_default_signal IS_WINDOWS proc send_signal death_sig os killpg proc pid death_sig _stdout _stdout close _stderr _stderr close