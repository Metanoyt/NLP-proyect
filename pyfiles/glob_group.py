mypy allow-untyped-defs re collections abc Iterable typing Union GlobPattern = Union str Iterable str GlobGroup A set patterns candidate strings will matched against A candidate composed list segments separated ` ` separator ` ` e g foo bar baz A pattern contains one more segments Segments can - A literal string e g foo which matches exactly - A string containing wildcard e g torch foo baz The wildcard matches any string including empty string - A double wildcard This matches against zero more complete segments Examples ` ` torch ` ` matches ` ` torch ` ` all its submodules e g ` ` torch nn ` ` ` ` torch nn functional ` ` ` ` torch ` ` matches ` ` torch nn ` ` ` ` torch functional ` ` ` ` torch nn functional ` ` ` ` torch ` ` matches ` ` torch ` ` ` ` torchvision ` ` all their submodules A candidates will match ` ` GlobGroup ` ` matches any ` ` include ` ` patterns none ` ` exclude ` ` patterns Args include Union str Iterable str A string list strings each representing pattern matched against A candidate will match matches any include pattern exclude Union str Iterable str A string list strings each representing pattern matched against A candidate will excluded matching matches any exclude pattern separator str A string delimits segments candidates patterns By default which corresponds how modules named Python Another common value which Unix path separator __init__ include GlobPattern exclude GlobPattern = separator str = _dbg = f GlobGroup include= include exclude= exclude include = GlobGroup _glob_list include separator exclude = GlobGroup _glob_list exclude separator separator = separator __str__ _dbg __repr__ _dbg matches candidate str - bool candidate = separator + candidate any p fullmatch candidate p include all p fullmatch candidate p exclude staticmethod _glob_list elems GlobPattern separator str = isinstance elems str GlobGroup _glob_to_re elems separator GlobGroup _glob_to_re e separator e elems staticmethod _glob_to_re pattern str separator str = avoid corner cases first component we prefix candidate string so ` torch ` will regex against ` torch ` assuming separator component_to_re component component component == + re escape separator + ^ + separator + + raise ValueError can only appear entire path segment re escape separator + ^ + separator + join re escape x x component split result = join component_to_re c c pattern split separator re compile result