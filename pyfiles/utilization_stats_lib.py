dataclasses dataclass field datetime datetime typing Optional pyrefly ignore missing-import dataclasses_json DataClassJsonMixin type ignore import-not-found _DATA_MODEL_VERSION = data model test log usage dataclass UtilizationStats avg Optional float = None max Optional float = None raw Optional list float = None dataclass UtilizationMetadata DataClassJsonMixin type ignore misc no-any-unimported level str workflow_id str job_id str workflow_name str job_name str usage_collect_interval float data_model_version float start_at int gpu_count Optional int = None cpu_count Optional int = None gpu_type Optional str = None error Optional str = None dataclass GpuUsage DataClassJsonMixin type ignore misc no-any-unimported uuid Optional str = None util_percent Optional UtilizationStats = None mem_util_percent Optional UtilizationStats = None allocated_mem_percent Optional UtilizationStats = None allocated_mem_value Optional UtilizationStats = None total_mem_value Optional float = None dataclass RecordData DataClassJsonMixin type ignore misc no-any-unimported cpu Optional UtilizationStats = None memory Optional UtilizationStats = None gpu_usage Optional list GpuUsage = None dataclass UtilizationRecord DataClassJsonMixin type ignore misc no-any-unimported level str timestamp int data Optional RecordData = None cmd_names Optional list str = None error Optional str = None log_duration Optional str = None logs Optional list str = None db schema related https github com pytorch test-infra blob main clickhouse_db_schema oss_ci_utilization oss_ci_utilization_metadata_schema sql dataclass OssCiSegmentV DataClassJsonMixin type ignore misc no-any-unimported level str name str start_at int end_at int extra_info dict str str dataclass OssCiUtilizationMetadataV created_at int repo str workflow_id int run_attempt int job_id int workflow_name str job_name str usage_collect_interval float data_model_version str gpu_count int cpu_count int gpu_type str start_at int end_at int segments list OssCiSegmentV tags list str = field default_factory=list data model time series data https github com pytorch test-infra blob main clickhouse_db_schema oss_ci_utilization oss_ci_time_series_schema sql dataclass OssCiUtilizationTimeSeriesV created_at int type str tags list str time_stamp int repo str workflow_id int run_attempt int job_id int workflow_name str job_name str json_data str getDataModelVersion - float _DATA_MODEL_VERSION getTsNow - int ts = datetime now timestamp int ts dataclass WorkflowInfo workflow_run_id int workflow_name str job_id int run_attempt int job_name str repo str = pytorch pytorch